(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{461:function(e,t,r){var n=r(18);e.exports=function(e){return n(Set.prototype.values,e)}},463:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(161);var o=r(219),l=r(128);function c(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||Object(o.a)(e)||Object(l.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},469:function(e,t,r){var content=r(486);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(26).default)("52bc6227",content,!0,{sourceMap:!1})},484:function(e,t,r){e.exports=r.p+"img/gestures-icons.dd2f564.png"},485:function(e,t,r){"use strict";r(469)},486:function(e,t,r){var n=r(25)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Bad+Script&family=Raleway:wght@100;300&display=swap);"]),n.push([e.i,".baseModelControl[data-v-beebc514]{width:100vw;height:120px;display:flex;flex-direction:row;justify-content:center;align-content:center}.baseModelControl .baseModelCB[data-v-beebc514]{width:240px;height:70px;position:relative}.baseModelControl .baseModelCB-md[data-v-beebc514]{width:280px;height:100px}.baseModelControl-md[data-v-beebc514]{position:fixed;bottom:10px;padding-left:100px}.baseModelControl-sm[data-v-beebc514]{order:-1;height:60px}.model-info[data-v-beebc514]{font-size:1.2em;left:50%;transform:translateX(-50%);top:1%;position:absolute;color:#fff;z-index:1000}.model[data-v-beebc514]{position:relative;width:100%;height:100%}.baseDom-md[data-v-beebc514]{width:100%;height:100vh}.baseDom-sm[data-v-beebc514]{width:100%;height:100vw}",""]),e.exports=n},490:function(e,t,r){r(5)({target:"Math",stat:!0},{sign:r(301)})},491:function(e,t,r){"use strict";r(303)("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r(304))},492:function(e,t,r){"use strict";r(5)({target:"Set",proto:!0,real:!0,forced:r(19)},{addAll:r(532)})},493:function(e,t,r){"use strict";r(5)({target:"Set",proto:!0,real:!0,forced:r(19)},{deleteAll:r(305)})},494:function(e,t,r){"use strict";var n=r(19),o=r(5),l=r(45),c=r(18),d=r(43),h=r(9),f=r(91),m=r(42);o({target:"Set",proto:!0,real:!0,forced:n},{difference:function(e){var t=h(this),r=new(f(t,l("Set")))(t),n=d(r.delete);return m(e,(function(e){c(n,r,e)})),r}})},495:function(e,t,r){"use strict";var n=r(5),o=r(19),l=r(9),c=r(41),d=r(461),h=r(42);n({target:"Set",proto:!0,real:!0,forced:o},{every:function(e){var t=l(this),r=d(t),n=c(e,arguments.length>1?arguments[1]:void 0);return!h(r,(function(e,r){if(!n(e,e,t))return r()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},496:function(e,t,r){"use strict";var n=r(19),o=r(5),l=r(45),c=r(18),d=r(43),h=r(9),f=r(41),m=r(91),v=r(461),T=r(42);o({target:"Set",proto:!0,real:!0,forced:n},{filter:function(e){var t=h(this),r=v(t),n=f(e,arguments.length>1?arguments[1]:void 0),o=new(m(t,l("Set"))),y=d(o.add);return T(r,(function(e){n(e,e,t)&&c(y,o,e)}),{IS_ITERATOR:!0}),o}})},497:function(e,t,r){"use strict";var n=r(5),o=r(19),l=r(9),c=r(41),d=r(461),h=r(42);n({target:"Set",proto:!0,real:!0,forced:o},{find:function(e){var t=l(this),r=d(t),n=c(e,arguments.length>1?arguments[1]:void 0);return h(r,(function(e,r){if(n(e,e,t))return r(e)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},498:function(e,t,r){"use strict";var n=r(19),o=r(5),l=r(45),c=r(18),d=r(43),h=r(9),f=r(91),m=r(42);o({target:"Set",proto:!0,real:!0,forced:n},{intersection:function(e){var t=h(this),r=new(f(t,l("Set"))),n=d(t.has),o=d(r.add);return m(e,(function(e){c(n,t,e)&&c(o,r,e)})),r}})},499:function(e,t,r){"use strict";var n=r(19),o=r(5),l=r(18),c=r(43),d=r(9),h=r(42);o({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:function(e){var t=d(this),r=c(t.has);return!h(e,(function(e,n){if(!0===l(r,t,e))return n()}),{INTERRUPTED:!0}).stopped}})},500:function(e,t,r){"use strict";var n=r(19),o=r(5),l=r(45),c=r(18),d=r(43),h=r(15),f=r(9),m=r(160),v=r(42);o({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:function(e){var t=m(this),r=f(e),n=r.has;return h(n)||(r=new(l("Set"))(e),n=d(r.has)),!v(t,(function(e,t){if(!1===c(n,r,e))return t()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},501:function(e,t,r){"use strict";var n=r(19),o=r(5),l=r(18),c=r(43),d=r(9),h=r(42);o({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:function(e){var t=d(this),r=c(t.has);return!h(e,(function(e,n){if(!1===l(r,t,e))return n()}),{INTERRUPTED:!0}).stopped}})},502:function(e,t,r){"use strict";var n=r(19),o=r(5),l=r(7),c=r(9),d=r(31),h=r(461),f=r(42),m=l([].join),v=[].push;o({target:"Set",proto:!0,real:!0,forced:n},{join:function(e){var t=c(this),r=h(t),n=void 0===e?",":d(e),o=[];return f(r,v,{that:o,IS_ITERATOR:!0}),m(o,n)}})},503:function(e,t,r){"use strict";var n=r(19),o=r(5),l=r(45),c=r(41),d=r(18),h=r(43),f=r(9),m=r(91),v=r(461),T=r(42);o({target:"Set",proto:!0,real:!0,forced:n},{map:function(e){var t=f(this),r=v(t),n=c(e,arguments.length>1?arguments[1]:void 0),o=new(m(t,l("Set"))),y=h(o.add);return T(r,(function(e){d(y,o,n(e,e,t))}),{IS_ITERATOR:!0}),o}})},504:function(e,t,r){"use strict";var n=r(5),o=r(2),l=r(19),c=r(43),d=r(9),h=r(461),f=r(42),m=o.TypeError;n({target:"Set",proto:!0,real:!0,forced:l},{reduce:function(e){var t=d(this),r=h(t),n=arguments.length<2,o=n?void 0:arguments[1];if(c(e),f(r,(function(r){n?(n=!1,o=r):o=e(o,r,r,t)}),{IS_ITERATOR:!0}),n)throw m("Reduce of empty set with no initial value");return o}})},505:function(e,t,r){"use strict";var n=r(5),o=r(19),l=r(9),c=r(41),d=r(461),h=r(42);n({target:"Set",proto:!0,real:!0,forced:o},{some:function(e){var t=l(this),r=d(t),n=c(e,arguments.length>1?arguments[1]:void 0);return h(r,(function(e,r){if(n(e,e,t))return r()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},506:function(e,t,r){"use strict";var n=r(19),o=r(5),l=r(45),c=r(18),d=r(43),h=r(9),f=r(91),m=r(42);o({target:"Set",proto:!0,real:!0,forced:n},{symmetricDifference:function(e){var t=h(this),r=new(f(t,l("Set")))(t),n=d(r.delete),o=d(r.add);return m(e,(function(e){c(n,r,e)||c(o,r,e)})),r}})},507:function(e,t,r){"use strict";var n=r(5),o=r(19),l=r(45),c=r(43),d=r(9),h=r(91),f=r(42);n({target:"Set",proto:!0,real:!0,forced:o},{union:function(e){var t=d(this),r=new(h(t,l("Set")))(t);return f(e,c(r.add),{that:r}),r}})},508:function(e,t,r){"use strict";r.r(t);var n=r(1),o=r(30),l=(r(108),r(84),r(59),r(67),r(36),r(66),r(12),r(10),r(17),r(6),r(20),r(11),r(21),r(50),r(34),r(70),r(74),r(16)),c=r(463),d=r(28),h=r(29);r(204),r(51),r(205),r(206),r(207),r(208),r(209),r(210),r(211),r(212),r(213),r(214),r(215),r(216),r(217),r(52),r(22),r(69),r(93),r(65),r(490),r(491),r(492),r(493),r(494),r(495),r(496),r(497),r(498),r(499),r(500),r(501),r(502),r(503),r(504),r(505),r(506),r(507),r(68);function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function T(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y=16720418,E=.9,R=.1,M={NONLINEAR_EXPONENT:.4,NEUTRAL_VALUE:.5,LOW_TO_MID:{RED_START:.23,RED_RANGE:.75,GREEN_START:.7,GREEN_RANGE:.23,BLUE_START:.27,BLUE_RANGE:-.27},MID_TO_HIGH:{RED_START:.98,RED_RANGE:-.42,GREEN_START:.93,GREEN_RANGE:-.81,BLUE_START:0}},w={AMBIENT_COLOR:6702148,AMBIENT_INTENSITY:.6,MAIN_LIGHT_COLOR:16777215,MAIN_LIGHT_INTENSITY:.8,FILL_LIGHT_COLOR:16772829,FILL_LIGHT_INTENSITY:.4,RIM_LIGHT_COLOR:11206655,RIM_LIGHT_INTENSITY:.3,INTERNAL_LIGHT1_COLOR:16737894,INTERNAL_LIGHT1_INTENSITY:.5,INTERNAL_LIGHT1_DISTANCE:100,INTERNAL_LIGHT2_COLOR:6711039,INTERNAL_LIGHT2_INTENSITY:.3,INTERNAL_LIGHT2_DISTANCE:80},S=function(){function e(t,r){Object(d.a)(this,e),this.THREE=t,this.scene=r,this.currentVTKMesh=null,this.wireframeMesh=null,this.lightingInitialized=!1,this.performanceMode="high",this.allVTKMeshes=[],this.enableLoD=!0,this.lodCache=new Map}var t,r,n,m;return Object(h.a)(e,[{key:"loadVTKFile",value:(m=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n,o,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:{},n=r.modelSize||420,(o=T({displayName:"placental model",color:y,opacity:E,modelSize:n,lineWidth:r.lineWidth||Math.max(2,Math.round(n/70)),pointSize:r.pointSize||Math.max(8,Math.round(n/17)),enableWireframe:!0,useCylinderGeometry:!0,cylinderSegments:10,enablePressureMapping:!0,enableFluxMapping:!1,colorMappingType:"pressure",clearScene:!0,useLoD:!0,onProgress:null,onComplete:null},r)).onProgress&&o.onProgress("Initializing ".concat(o.displayName),0),e.prev=4,!o.useLoD||!this.enableLoD){e.next=11;break}return e.next=8,this.loadWithLoD(t,o);case 8:case 13:return e.abrupt("return",e.sent);case 11:return e.next=13,this.loadStandard(t,o);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(4),console.error("[VTKLoader] Failed to load VTK file ".concat(t,":"),e.t0),e.abrupt("return",{success:!1,error:e.t0});case 20:case"end":return e.stop()}}),e,this,[[4,16]])}))),function(e){return m.apply(this,arguments)})},{key:"fetchVTKFile",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n,o,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=l.length>1&&void 0!==l[1]?l[1]:null)&&r("Downloading model data...",20),e.next=4,fetch(t);case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("HTTP ".concat(n.status,": ").concat(n.statusText));case 7:return e.next=9,n.text();case 9:return o=e.sent,r&&r("Processing model data",40),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"parseVTKData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};t&&t("Building model geometry",60);for(var l=e.split("\n"),d=[],h=!1,f=!1,m=!1,v=!1,T=!1,y=[],E=[],R=[],M=[],w=0,S=[],i=0;i<l.length;i++){var line=l[i].trim();if(t&&i%1e3==0){var progress=60+i/l.length*20;t("Building model geometry",progress)}if(line.startsWith("POINTS")){var N=line.split(" ");w=parseInt(N[1]),h=!0,f=!1,m=!1,v=!1}else if(line.startsWith("CELLS")||line.startsWith("POLYGONS")||line.startsWith("LINES"))h=!1,f=!0,m=!1,v=!1,T=!1;else if(line.startsWith("POINT_DATA"))h=!1,f=!1,m=!1,v=!1,T=!1;else if(line.startsWith("SCALARS")){var I=line.split(" ");if(I.length>1){var L=I[1].toLowerCase();"radius"===L?(m=!0,v=!1,T=!1):"pressure"===L?(m=!1,v=!0,T=!1):"flux"===L||"flow"===L?(m=!1,v=!1,T=!0):(m=!1,v=!1,T=!1)}h=!1,f=!1}else if(!line.startsWith("LOOKUP_TABLE")){if(h&&y.length<3*w){var O=line.split(" ").filter((function(e){return""!==e})).map(parseFloat);y.push.apply(y,Object(c.a)(O))}if(m&&E.length<w){var _=line.split(" ").filter((function(e){return""!==e})).map(parseFloat);E.push.apply(E,Object(c.a)(_))}if(v&&R.length<w){var C=line.split(" ").filter((function(e){return""!==e})).map(parseFloat);R.push.apply(R,Object(c.a)(C))}if(T&&M.length<w){var A=line.split(" ").filter((function(e){return""!==e})).map(parseFloat);M.push.apply(M,Object(c.a)(A))}if(f&&""!==line.trim()&&!line.startsWith("CELL_TYPES")&&!line.startsWith("POINT_DATA")&&!line.startsWith("SCALARS")&&!line.startsWith("LOOKUP_TABLE")){var D=line.split(" ").filter((function(e){return""!==e})),x=D.map((function(e){return parseInt(e)})).filter((function(e){return!isNaN(e)}));if(x.length>1){var P=x[0];if(x.length===P+1&&(S.push(x),!n))for(var H=1;H<P;H++){var k=x[H],V=x[H+1];void 0===V||isNaN(k)||isNaN(V)||3*k+2<y.length&&3*V+2<y.length&&d.push(y[3*k],y[3*k+1],y[3*k+2],y[3*V],y[3*V+1],y[3*V+2])}}}(line.startsWith("CELL_TYPES")||line.startsWith("POINT_DATA"))&&(f=!1)}}var z=new this.THREE.BufferGeometry;if(n&&E.length>0&&S.length>0){var j=this.createCylinderGeometry(y,E,R,M,S,r,o);return{geometry:j,isPointCloud:!1,radiusData:E,pressureData:R,fluxData:M}}if(0===d.length&&console.warn("[VTKLoader] No line segments created! Using point cloud fallback."),0===d.length&&y.length>0)return z.setAttribute("position",new this.THREE.Float32BufferAttribute(y,3)),E.length>0&&z.setAttribute("radius",new this.THREE.Float32BufferAttribute(E,1)),R.length>0&&z.setAttribute("pressure",new this.THREE.Float32BufferAttribute(R,1)),M.length>0&&z.setAttribute("flux",new this.THREE.Float32BufferAttribute(M,1)),{geometry:z,isPointCloud:!0,radiusData:E,pressureData:R,fluxData:M};z.setAttribute("position",new this.THREE.Float32BufferAttribute(d,3)),z.computeBoundingBox();var G=z.boundingBox.getCenter(new this.THREE.Vector3),B=z.boundingBox.getSize(new this.THREE.Vector3),K=Math.max(B.x,B.y,B.z),U=r/K;return z.translate(-G.x,-G.y,-G.z),z.scale(U,U,U),{geometry:z,isPointCloud:!1,radiusData:E,pressureData:R,fluxData:M}}},{key:"createCylinderGeometry",value:function(e,t,r,n,o,l,d){var h=new this.THREE.BufferGeometry,m=[],v=[],T=[],y=[],E=0,M=1/0,w=-1/0,S=1/0,N=-1/0;"pressure"===d.colorMappingType&&r.length>0?(M=Math.min.apply(Math,Object(c.a)(r)),w=Math.max.apply(Math,Object(c.a)(r))):"flux"===d.colorMappingType&&n.length>0&&(S=Math.min.apply(Math,Object(c.a)(n)),N=Math.max.apply(Math,Object(c.a)(n)));var I,L=this.detectBranchingPoints(o,e.length/3),O=f(o);try{for(O.s();!(I=O.n()).done;)for(var _=I.value,C=_[0],i=1;i<C;i++){var A=_[i],D=_[i+1];if(void 0!==D&&A<e.length/3&&D<e.length/3){var x=new this.THREE.Vector3(e[3*A],e[3*A+1],e[3*A+2]),P=new this.THREE.Vector3(e[3*D],e[3*D+1],e[3*D+2]),H=t[A]||R,k=t[D]||R,V=void 0,z=void 0;if("pressure"===d.colorMappingType&&r.length>0){var j=r[A]||0,G=r[D]||0;V=this.pressureToColor(j,M,w),z=this.pressureToColor(G,M,w)}else if("flux"===d.colorMappingType&&n.length>0){var B=n[A]||0,K=n[D]||0;V=this.fluxToColor(B,S,N),z=this.fluxToColor(K,S,N)}else d.colorMappingType,V=new this.THREE.Color(1,1,1),z=new this.THREE.Color(1,1,1);var U=L.has(A),$=L.has(D),F=this.createTaperedCylinder(x,P,H,k,8,V,z,U,$),W=F.vertices,Y=F.normals,J=F.colors,X=F.indices;m.push.apply(m,Object(c.a)(W)),v.push.apply(v,Object(c.a)(Y)),T.push.apply(T,Object(c.a)(J));var Q,Z=f(X);try{for(Z.s();!(Q=Z.n()).done;){var ee=Q.value;y.push(ee+E)}}catch(e){Z.e(e)}finally{Z.f()}E+=W.length/3}}}catch(e){O.e(e)}finally{O.f()}this.createBranchingJunctions(L,e,t,r,n,M,w,S,N,m,v,T,y,E,d),h.setAttribute("position",new this.THREE.Float32BufferAttribute(m,3)),h.setAttribute("normal",new this.THREE.Float32BufferAttribute(v,3)),h.setAttribute("color",new this.THREE.Float32BufferAttribute(T,3)),h.setIndex(y),h.computeBoundingBox();var te=h.boundingBox.getCenter(new this.THREE.Vector3),re=h.boundingBox.getSize(new this.THREE.Vector3),ne=l/Math.max(re.x,re.y,re.z);return h.translate(-te.x,-te.y,-te.z),h.scale(ne,ne,ne),h}},{key:"pressureToColor",value:function(e,t,r){var n=r>t?(e-t)/(r-t):M.NEUTRAL_VALUE,o=Math.pow(n,M.NONLINEAR_EXPONENT),l=new this.THREE.Color;if(o<M.NEUTRAL_VALUE){var c=2*o,d=M.LOW_TO_MID;l.setRGB(d.RED_START+c*d.RED_RANGE,d.GREEN_START+c*d.GREEN_RANGE,d.BLUE_START+c*d.BLUE_RANGE)}else{var h=2*(o-M.NEUTRAL_VALUE),f=M.MID_TO_HIGH;l.setRGB(f.RED_START+h*f.RED_RANGE,f.GREEN_START+h*f.GREEN_RANGE,f.BLUE_START)}return l}},{key:"determineVesselType",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=t[e]||R;if(r&&r.length>0){var l=r[e]||0,c=r.reduce((function(a,b){return a+b}),0)/r.length;return l>c?"arterial":"venous"}if(n&&n.length>0){var d=n[e]||0;return d>0?"arterial":"venous"}var h=t.reduce((function(a,b){return a+b}),0)/t.length;return o>h?"arterial":"venous"}},{key:"fluxToColor",value:function(e,t,r){var n=new this.THREE.Color;if(r===t)return n.setRGB(.5,.5,.5),n;var o,l=Math.abs(t),c=Math.abs(r),d=.01*Math.max(l,c),h=Math.sign(e)*Math.log(Math.abs(e)+d),f=Math.sign(t)*Math.log(Math.abs(t)+d),m=Math.sign(r)*Math.log(Math.abs(r)+d)-f;o=0!==m?(h-f)/m:.5;var v=2*Math.pow(o,.3)-1;if(v<-.8)n.setRGB(0,.1,.9);else if(v<-.5){var T=(v+.8)/.3;n.setRGB(0+.1*T,.1+.4*T,.9+.1*T)}else if(v<-.2){var y=(v+.5)/.3;n.setRGB(.1+.1*y,.5+.3*y,1-.2*y)}else if(v<.1){var E=(v+.2)/.3;n.setRGB(.2-.2*E,.8+.2*E,.8-.3*E)}else if(v<.4){var R=(v-.1)/.3;n.setRGB(0+.3*R,1,.5-.5*R)}else if(v<.7){var M=(v-.4)/.3;n.setRGB(.3+.7*M,1,0)}else{var w=(v-.7)/.3;n.setRGB(1,1-1*w,0)}return n}},{key:"createTaperedCylinder",value:function(e,t,r,n,o,l,c){var d=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=[],m=[],v=[],T=[],y=(new this.THREE.Vector3).subVectors(t,e).normalize(),E=e.clone(),R=t.clone(),M=r,w=n;if(d){var S=Math.max(.08*r,.005);E.add(y.clone().multiplyScalar(-S)),M=1.02*r}if(h){var N=Math.max(.08*n,.005);R.add(y.clone().multiplyScalar(N)),w=1.02*n}var I=new this.THREE.Vector3(0,1,0),L=(new this.THREE.Vector3).crossVectors(y,I).normalize();L.lengthSq()<.1&&L.crossVectors(y,new this.THREE.Vector3(1,0,0)).normalize();for(var O=(new this.THREE.Vector3).crossVectors(L,y).normalize(),_=0;_<=1;_++)for(var C=_,A=(new this.THREE.Vector3).lerpVectors(E,R,C),D=M+(w-M)*C,x=(new this.THREE.Color).lerpColors(l,c,C),P=0;P<o;P++){var H=P/o*Math.PI*2,k=Math.cos(H)*D,V=Math.sin(H)*D,z=(new this.THREE.Vector3).copy(A).add(L.clone().multiplyScalar(k)).add(O.clone().multiplyScalar(V));f.push(z.x,z.y,z.z);var j=(new this.THREE.Vector3).copy(L.clone().multiplyScalar(k)).add(O.clone().multiplyScalar(V)).normalize();m.push(j.x,j.y,j.z),v.push(x.r,x.g,x.b)}for(var G=0;G<1;G++)for(var B=0;B<o;B++){var K=G*o+B,U=G*o+(B+1)%o,$=(G+1)*o+B,F=(G+1)*o+(B+1)%o;T.push(K,U,$),T.push($,U,F)}return{vertices:f,normals:m,colors:v,indices:T}}},{key:"createVTKMesh",value:function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(t){var d=new this.THREE.PointsMaterial({color:r.color,size:r.pointSize,transparent:!0,opacity:r.opacity,sizeAttenuation:!0});n=new this.THREE.Points(e,d)}else if(r.useCylinderGeometry&&o&&o.length>0){var h="pressure"===r.colorMappingType&&l&&l.length>0||"flux"===r.colorMappingType&&c&&c.length>0,f=r.color;"default"===r.colorMappingType?f=r.color:h&&(f=16777215);var m=new this.THREE.MeshMatcapMaterial({color:f,transparent:!0,opacity:r.opacity,vertexColors:h});n=new this.THREE.Mesh(e,m)}else{var v=new this.THREE.LineBasicMaterial({color:r.color,linewidth:r.lineWidth,transparent:!0,opacity:r.opacity});if(n=new this.THREE.LineSegments(e,v),r.enableWireframe){var T=new this.THREE.LineBasicMaterial({color:16777215&r.color|8947848,linewidth:Math.max(1,r.lineWidth-2),transparent:!0,opacity:.3*r.opacity}),y=new this.THREE.LineSegments(e,T);y.position.copy(n.position),y.scale.copy(n.scale),y.scale.multiplyScalar(1.005),this.wireframeMesh=y}}return n}},{key:"addToScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!1!==t.clearPrevious&&(this.currentVTKMesh&&this.scene.remove(this.currentVTKMesh),this.wireframeMesh&&this.wireframeMesh!==e&&this.scene.remove(this.wireframeMesh)),this.setupSceneLighting(),this.scene.add(e),this.allVTKMeshes.push(e),this.currentVTKMesh=e,this.wireframeMesh&&this.scene.add(this.wireframeMesh)}},{key:"setupSceneLighting",value:function(){if(!this.lightingInitialized){var e=w,t=new this.THREE.AmbientLight(e.AMBIENT_COLOR,e.AMBIENT_INTENSITY);this.scene.add(t);var r=new this.THREE.DirectionalLight(e.MAIN_LIGHT_COLOR,e.MAIN_LIGHT_INTENSITY);r.position.set(10,10,5),r.castShadow=!0,this.scene.add(r);var n=new this.THREE.DirectionalLight(e.FILL_LIGHT_COLOR,e.FILL_LIGHT_INTENSITY);n.position.set(-5,3,-1),this.scene.add(n);var o=new this.THREE.DirectionalLight(e.RIM_LIGHT_COLOR,e.RIM_LIGHT_INTENSITY);o.position.set(0,-5,10),this.scene.add(o);var l=new this.THREE.PointLight(e.INTERNAL_LIGHT1_COLOR,e.INTERNAL_LIGHT1_INTENSITY,e.INTERNAL_LIGHT1_DISTANCE);l.position.set(0,0,0),this.scene.add(l);var c=new this.THREE.PointLight(e.INTERNAL_LIGHT2_COLOR,e.INTERNAL_LIGHT2_INTENSITY,e.INTERNAL_LIGHT2_DISTANCE);c.position.set(20,-10,15),this.scene.add(c),this.lightingInitialized=!0}}},{key:"setCopperScene",value:function(e){this.copperScene=e}},{key:"setPerformanceMode",value:function(e){this.performanceMode=e,console.log("[VTKLoader] Performance mode set to: ".concat(e))}},{key:"detectBranchingPoints",value:function(e,t){var r,n=new Map,o=f(e);try{for(o.s();!(r=o.n()).done;)for(var c=r.value,d=c[0],i=1;i<d;i++){var h=c[i],m=c[i+1];void 0!==m&&h<t&&m<t&&(n.has(h)||n.set(h,new Set),n.has(m)||n.set(m,new Set),n.get(h).add(m),n.get(m).add(h))}}catch(e){o.e(e)}finally{o.f()}var v,T=new Map,y=f(n);try{for(y.s();!(v=y.n()).done;){var E=Object(l.a)(v.value,2),R=E[0],M=E[1];M.size>2&&T.set(R,Array.from(M))}}catch(e){y.e(e)}finally{y.f()}return T}},{key:"createBranchingJunctions",value:function(e,t,r,n,o,d,h,m,v,T,y,E,M,w,S){var N,I=f(e);try{for(I.s();!(N=I.n()).done;){var L=Object(l.a)(N.value,2),O=L[0],_=L[1],C=new this.THREE.Vector3(t[3*O],t[3*O+1],t[3*O+2]),A=r[O]||R,D=void 0;if("pressure"===S.colorMappingType&&n.length>0){var x=n[O]||0;D=this.pressureToColor(x,d,h)}else if("flux"===S.colorMappingType&&o.length>0){var P=o[O]||0;D=this.fluxToColor(P,m,v)}else D=(S.colorMappingType,new this.THREE.Color(1,1,1));var H=this.createSeamlessJunction(C,A,D,_,t,r);T.push.apply(T,Object(c.a)(H.vertices)),y.push.apply(y,Object(c.a)(H.normals)),E.push.apply(E,Object(c.a)(H.colors));var k,V=f(H.indices);try{for(V.s();!(k=V.n()).done;){var z=k.value;M.push(z+w)}}catch(e){V.e(e)}finally{V.f()}w+=H.vertices.length/3}}catch(e){I.e(e)}finally{I.f()}}},{key:"createSeamlessJunction",value:function(e,t,r,n,o,l){var c=[],d=[],h=[],m=[],v=[],T=t;if(n&&o&&l){var y,E=f(n);try{for(E.s();!(y=E.n()).done;){var R=y.value;if(3*R+2<o.length){var M=new this.THREE.Vector3(o[3*R],o[3*R+1],o[3*R+2]),w=(new this.THREE.Vector3).subVectors(M,e).normalize(),S=l[R]||t;T=Math.max(T,S),v.push({direction:w,radius:S,distance:e.distanceTo(M)})}}}catch(e){E.e(e)}finally{E.f()}}if(v.length<3)return{vertices:[],normals:[],colors:[],indices:[]};for(var N=.95*T,i=0;i<=6;i++)for(var I=i/6*Math.PI,L=Math.sin(I),O=Math.cos(I),_=0;_<=6;_++){var C,A=_/6*Math.PI*2,D=Math.sin(A),x=Math.cos(A),P=new this.THREE.Vector3(L*x,O,L*D),H=N,k=0,V=N,z=f(v);try{for(z.s();!(C=z.n()).done;){var j=C.value,G=Math.max(0,P.dot(j.direction)),B=Math.pow(G,3);H+=Math.max(N,1.2*j.radius)*B*.3,k+=B,B>.1&&(V=Math.max(V,1.25*j.radius))}}catch(e){z.e(e)}finally{z.f()}var K=1+.2*k;H=Math.max(H*K,V),H=Math.max(H,.9*N);var U=(new this.THREE.Vector3).copy(P).multiplyScalar(H).add(e);c.push(U.x,U.y,U.z);var $=this.calculateSmoothNormal(U,e,v);d.push($.x,$.y,$.z),h.push(r.r,r.g,r.b)}for(var F=0;F<6;F++)for(var W=0;W<6;W++){var Y=7*F+W,J=Y+6+1;m.push(Y,J,Y+1),m.push(J,J+1,Y+1)}return{vertices:c,normals:d,colors:h,indices:m}}},{key:"calculateSmoothNormal",value:function(e,t,r){var n,o=(new this.THREE.Vector3).subVectors(e,t).normalize(),l=o.clone(),c=0,d=[],h=f(r);try{for(h.s();!(n=h.n()).done;){var m=n.value,v=Math.max(0,o.dot(m.direction)),T=Math.pow(v,2.5)*m.radius;d.push({direction:m.direction,weight:T}),c+=T}}catch(e){h.e(e)}finally{h.f()}if(c>0){var y,E=new this.THREE.Vector3,R=f(d);try{for(R.s();!(y=R.n()).done;){var M=y.value,w=M.weight/c;E.add(M.direction.clone().multiplyScalar(.12*w))}}catch(e){R.e(e)}finally{R.f()}l.add(E)}return l.normalize()}},{key:"clearTemporaryData",value:function(){}},{key:"loadWithLoD",value:(r=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,o,l,c,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="".concat(t,"_").concat(r.colorMappingType),!this.lodCache.has(n)){e.next=7;break}return o=this.lodCache.get(n),l=this.createVTKMesh(o.geometry,o.isPointCloud,r,o.radiusData,o.pressureData,o.fluxData),this.addToScene(l,r),r.onComplete&&r.onComplete(l,o.isPointCloud,o.radiusData,o.pressureData,o.fluxData),e.abrupt("return",{success:!0,mesh:l,isPointCloud:o.isPointCloud,radiusData:o.radiusData,pressureData:o.pressureData,fluxData:o.fluxData});case 7:return r.onProgress&&r.onProgress("Loading ".concat(r.displayName),5),e.next=10,this.fetchVTKFile(t,r.onProgress);case 10:return c=e.sent,d=this.parseVTKData(c,r.onProgress,r.modelSize,!0,r),h=this.createVTKMesh(d.geometry,d.isPointCloud,r,d.radiusData,d.pressureData,d.fluxData),this.addToScene(h,r),this.lodCache.set(n,{geometry:d.geometry,isPointCloud:d.isPointCloud,radiusData:d.radiusData,pressureData:d.pressureData,fluxData:d.fluxData}),r.onComplete&&r.onComplete(h,d.isPointCloud,d.radiusData,d.pressureData,d.fluxData),e.abrupt("return",{success:!0,mesh:h,isPointCloud:d.isPointCloud,radiusData:d.radiusData,pressureData:d.pressureData,fluxData:d.fluxData});case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"loadStandard",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,o,l,c,d,h,f,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchVTKFile(t,r.onProgress);case 2:return n=e.sent,o=this.parseVTKData(n,r.onProgress,r.modelSize,r.useCylinderGeometry,r),l=o.geometry,c=o.isPointCloud,d=o.radiusData,h=o.pressureData,f=o.fluxData,m=this.createVTKMesh(l,c,r,d,h,f),this.addToScene(m,r),r.onComplete&&r.onComplete(m,c,d,h,f),e.abrupt("return",{success:!0,mesh:m,isPointCloud:c,radiusData:d,pressureData:h,fluxData:f});case 9:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"clearCache",value:function(){this.lodCache.clear(),console.log("[VTKLoader] LoD cache cleared")}},{key:"dispose",value:function(){var e=this;this.allVTKMeshes.forEach((function(t){e.scene.remove(t)})),this.allVTKMeshes=[],this.currentVTKMesh&&(this.scene.remove(this.currentVTKMesh),this.currentVTKMesh=null),this.wireframeMesh&&(this.scene.remove(this.wireframeMesh),this.wireframeMesh=null),this.lodCache.clear(),this.copperScene=null}}]),e}();function N(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function I(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?N(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):N(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var L={props:{useTubeRendering:{type:Boolean,default:!0},currentPerformanceMode:{type:String,default:"high"},modelName:{type:String,default:"Loading..."}},data:function(){return{Copper:null,THREE:null,baseRenderer:null,container:null,vtkLoader:null,_resizeHandler:null,clientMounted:!1,currentModelType:"arterial",currentColorMappingType:"pressure",modelConfig:{arterial:{path:"/model/healthy_gen_np3ns1_flux_250_arterial_tree.vtk",displayName:"Placental Arterial Tree",color:16720418,opacity:1,modelSize:420,useCylinderGeometry:!0,cylinderSegments:10},venous:{path:"/model/healthy_gen_np3ns1_flux_250_venous_tree.vtk",displayName:"Placental Venous Tree",color:2237183,opacity:1,modelSize:420,useCylinderGeometry:!0,cylinderSegments:10},combined:{displayName:"Placental Vascular Network",models:["arterial","venous"]}}}},computed:{mdAndUp:function(){if(!this.clientMounted)return!1;try{return this.$vuetify&&this.$vuetify.breakpoint&&this.$vuetify.breakpoint.mdAndUp}catch(e){return console.warn("[Model] Error accessing vuetify breakpoint:",e),!1}}},mounted:function(){var e=this;this.clientMounted=!0,this.$nextTick((function(){e.waitForPluginsAndInitialize()}))},methods:{getAssetPath:function(e){var t="";t=window.location.pathname.startsWith("/pregnancy-app/")||window.location.hostname.includes("github.io")?"/pregnancy-app":"";var r=e.startsWith("/")?e:"/"+e;return console.log("[Model] Asset path: ".concat(e," -> ").concat(t+r)),t+r},waitForPluginsAndInitialize:function(){var e=arguments,t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=e.length>0&&void 0!==e[0]?e[0]:0,10,200,t.checkPluginsAvailability()?(console.log("[Model] Plugins ready, initializing 3D engine..."),t.initializeCopper3D()):n<10?(console.log("[Model] Plugins not ready, retrying... (".concat(n+1,"/").concat(10,")")),t.$emit("model-state-updated",{modelName:"Loading 3D Engine... (".concat(n+1,"/").concat(10,")")}),setTimeout((function(){t.waitForPluginsAndInitialize(n+1)}),200)):(console.error("[Model] Failed to initialize plugins after maximum retries"),t.$emit("model-state-updated",{modelName:"Error: 3D engine initialization timed out"}));case 4:case"end":return r.stop()}}),r)})))()},checkPluginsAvailability:function(){try{return this.$Copper&&this.$three&&this.$baseRenderer&&this.$baseContainer&&"function"==typeof this.$Copper&&"function"==typeof this.$three&&"function"==typeof this.$baseRenderer&&"function"==typeof this.$baseContainer}catch(e){return!1}},initializeCopper3D:function(){this.waitForDOMAndInitialize()},waitForDOMAndInitialize:function(){var e=arguments,t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=e.length>0&&void 0!==e[0]?e[0]:0,20,100,t.container=t.$refs.baseDomObject,t.container?(console.log("[Model] DOM container found, initializing 3D engine..."),t.initialize3DEngine()):n<20?(console.log("[Model] DOM container not ready, retrying... (".concat(n+1,"/").concat(20,")")),t.$emit("model-state-updated",{modelName:"Preparing 3D Container... (".concat(n+1,"/").concat(20,")")}),setTimeout((function(){t.waitForDOMAndInitialize(n+1)}),100)):(console.error("[Model] Failed to find DOM container after maximum retries"),t.$emit("model-state-updated",{modelName:"Error: DOM container not found"}));case 5:case"end":return r.stop()}}),r)})))()},initialize3DEngine:function(){var e=this;try{this.Copper=this.$Copper(),this.THREE=this.$three(),this.baseRenderer=this.$baseRenderer();var t=this.$baseContainer();if(!this.baseRenderer||!t||!this.container)return console.error("[Model] 3D components not properly initialized"),void this.$emit("model-state-updated",{modelName:"Error: 3D components missing"});setTimeout((function(){t&&e.container&&(e.mdAndUp?t.style.height="100vh":t.style.height="100vw",e.container.appendChild(t)),e.initializeVTKLoader(),e.start()}),100),this.setupResizeListener(t)}catch(e){console.error("[Model] Error initializing 3D components:",e),this.$emit("model-state-updated",{modelName:"Error: Failed to initialize 3D engine"})}},setupResizeListener:function(e){var t=this,r=function(){setTimeout((function(){e&&(t.mdAndUp?e.style.height="100vh":e.style.height="100vw"),t.scene&&t.scene.onWindowResize()}),500)};window.addEventListener("resize",r),this._resizeHandler=r},initializeVTKLoader:function(){try{if(!this.baseRenderer)return void console.error("[Model] Base renderer not available");this.scene=this.baseRenderer.getSceneByName("placental-scene"),void 0===this.scene&&(this.scene=this.baseRenderer.createScene("placental-scene"),this.baseRenderer.setCurrentScene(this.scene)),this.vtkLoader=new S(this.THREE,this.scene.scene),this.vtkLoader.setCopperScene(this.scene),this.vtkLoader.setPerformanceMode(this.currentPerformanceMode),console.log("VTK Loader initialized with camera control and performance mode:",this.currentPerformanceMode)}catch(e){console.error("[Model] Error initializing VTK loader:",e),this.$emit("model-state-updated",{modelName:"Error: VTK loader initialization failed"})}},start:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Loading default placental model..."),t.next=3,e.loadTree("arterial");case 3:case"end":return t.stop()}}),t)})))()},reciveColoringType:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(console.log("[Model] Coloring type received:",e),t.vtkLoader){r.next=4;break}return console.warn("[Model] VTK loader not initialized"),r.abrupt("return");case 4:return n="pressure","flux"===e||"flow"===e?n="flux":"default"===e||"vessel-type"===e?n="default":"pressure"===e&&(n="pressure"),console.log("[Model] Mapped to colorMappingType:",n),t.currentColorMappingType=n,r.prev=8,t.$emit("model-state-updated",{modelName:"Updating color mapping..."}),r.next=12,t.loadTree(t.currentModelType,{colorMappingType:n,clearScene:!0});case 12:console.log("[Model] Model reloaded with new color mapping:",n),r.next=19;break;case 15:r.prev=15,r.t0=r.catch(8),console.error("[Model] Error updating color mapping:",r.t0),t.$emit("model-state-updated",{modelName:"Error updating color mapping"});case 19:case"end":return r.stop()}}),r,null,[[8,15]])})))()},loadTree:function(e){var t=arguments,r=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,l,c,d,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.length>1&&void 0!==t[1]?t[1]:{},console.log("[Model] Loading ".concat(e," model...")),l=r.modelConfig[e]){n.next=7;break}return console.error("[Model] Unknown model type: ".concat(e)),r.$emit("model-state-updated",{modelName:"Error: Unknown model type ".concat(e)}),n.abrupt("return");case 7:if("combined"!==e){n.next=12;break}return r.currentModelType=e,n.next=11,r.loadCombinedModels(l,o);case 11:return n.abrupt("return",n.sent);case 12:return r.currentModelType=e,c=I(I(I({},l),o),{},{cylinderSegments:o.highQuality?12:o.cylinderSegments||l.cylinderSegments,colorMappingType:o.colorMappingType||r.currentColorMappingType,useCylinderGeometry:!0}),d=r.getAssetPath(c.path),n.next=17,r.vtkLoader.loadVTKFile(d,{displayName:c.displayName,color:c.color,opacity:c.opacity,modelSize:c.modelSize,useCylinderGeometry:c.useCylinderGeometry,cylinderSegments:c.cylinderSegments,colorMappingType:c.colorMappingType||"pressure",clearPrevious:!1!==o.clearScene,useLoD:!1,onProgress:function(e){var t="".concat(e);r.$emit("model-state-updated",{modelName:t})},onComplete:function(){r.$emit("model-state-updated",{modelName:c.displayName});var e=r.getAssetPath("modelView/noInfarct_view.json");r.scene.loadViewUrl(e),r.scene.onWindowResize()}});case 17:return(h=n.sent).success||r.$emit("model-state-updated",{modelName:"Error: ".concat(h.error.message)}),n.abrupt("return",h);case 20:case"end":return n.stop()}}),n)})))()},loadCombinedModels:function(e){var t=arguments,r=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,l,i,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=t.length>1&&void 0!==t[1]?t[1]:{},l=o.models||e.models,n.prev=2,i=0;case 4:if(!(i<l.length)){n.next=11;break}return c=l[i],n.next=8,r.loadTree(c,I(I({},o),{},{clearScene:0===i,colorMappingType:o.colorMappingType}));case 8:i++,n.next=4;break;case 11:r.$emit("model-state-updated",{modelName:e.displayName}),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(2),console.error("[Model] Error loading combined models:",n.t0),r.$emit("model-state-updated",{modelName:"Loading Error"});case 18:case"end":return n.stop()}}),n,null,[[2,14]])})))()},reloadModel:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("User requested VTK model reload..."),t.next=3,e.loadTree("arterial",{color:16724787,displayName:"Placental Arterial Tree (Reloaded)"});case 3:case"end":return t.stop()}}),t)})))()},loadVenousTree:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Loading venous tree..."),t.next=3,e.loadTree("venous");case 3:case"end":return t.stop()}}),t)})))()},loadCombinedTrees:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Loading combined vascular network..."),t.next=3,e.loadTree("combined");case 3:case"end":return t.stop()}}),t)})))()},handleGestureIconClick:function(e){var rect=e.target.getBoundingClientRect();e.clientX-rect.left<=rect.width/4&&(console.log("[Model] Reset gesture clicked - resetting model to default position"),this.resetModelToDefault())},resetModelToDefault:function(){if(this.scene)try{var e=this.getAssetPath("modelView/noInfarct_view.json");this.scene.loadViewUrl(e),this.scene.onWindowResize(),this.vtkLoader&&this.vtkLoader.clearTemporaryData(),console.log("[Model] Model reset to default position completed"),this.$emit("model-state-updated",{modelName:this.modelName||"Placental Arterial Tree",resetTriggered:!0})}catch(e){console.error("[Model] Error resetting model to default:",e)}else console.warn("[Model] Scene not available for reset")}},beforeDestroy:function(){this.vtkLoader&&(this.vtkLoader.dispose(),this.vtkLoader=null),this._resizeHandler&&(window.removeEventListener("resize",this._resizeHandler),this._resizeHandler=null)}},O=L,_=(r(485),r(44)),component=Object(_.a)(O,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"model"},[n("header",{staticClass:"model-info"},[e._v(e._s(e.modelName))]),e._v(" "),n("client-only",{scopedSlots:e._u([{key:"fallback",fn:function(){return[n("div",{staticClass:"loading-placeholder"},[n("div",{staticClass:"loading-text"},[e._v("Loading 3D Engine...")])])]},proxy:!0}])},[n("div",{ref:"baseDomObject",class:e.mdAndUp?"baseDom-md":"baseDom-sm",staticStyle:{width:"100%",height:"100%"}}),e._v(" "),n("div",{ref:"threeDControls",staticClass:"baseModelControl",class:e.mdAndUp?"baseModelControl-md":"baseModelControl-sm"},[n("div",{staticClass:"baseModelCB",class:e.mdAndUp?"baseModelCB-md":""},[n("img",{staticClass:"h-full w-full md:object-contain",attrs:{src:r(484)},on:{click:e.handleGestureIconClick}})])])])],1)}),[],!1,null,"beebc514",null);t.default=component.exports},532:function(e,t,r){"use strict";var n=r(18),o=r(43),l=r(9);e.exports=function(){for(var e=l(this),t=o(e.add),r=0,c=arguments.length;r<c;r++)n(t,e,arguments[r]);return e}}}]);