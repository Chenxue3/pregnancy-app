(window.webpackJsonp=window.webpackJsonp||[]).push([[15,7,11],{466:function(e,t,o){var content=o(478);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(26).default)("4d05f86d",content,!0,{sourceMap:!1})},467:function(e,t,o){var content=o(480);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(26).default)("3870cd63",content,!0,{sourceMap:!1})},468:function(e,t,o){var content=o(482);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(26).default)("b31ce6f8",content,!0,{sourceMap:!1})},469:function(e,t,o){var content=o(486);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(26).default)("21066e9a",content,!0,{sourceMap:!1})},471:function(e,t,o){"use strict";o.r(t);var n={props:{useTubeRendering:{type:Boolean,default:!0},currentPerformanceMode:{type:String,default:"high"},isLoading:{type:Boolean,default:!1},loadingComplete:{type:Boolean,default:!1},waveform:{type:Array,default:function(){return[]}}},mounted:function(){this.coloredModelsBy="pressure"},data:function(){return{isCollapsed:!0,currentVesselType:"arterial",currentQuality:"standard",chart:null,playheadTimer:null,coloredModelsBy:"pressure"}},methods:{toggleCollapse:function(){this.isCollapsed=!this.isCollapsed},getPerformanceLabel:function(e){return{high:"High Performance",medium:"Medium Performance",low:"Low Performance",auto:"Auto Adjust"}[e]||"Unknown"}},beforeDestroy:function(){this.playheadTimer&&cancelAnimationFrame(this.playheadTimer),this.chart&&this.chart.dispose()}},r=(o(477),o(44)),l=o(63),d=o.n(l),c=o(458),h=o(448),m=o(608),f=o(586),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"model-control"},[o("div",{staticClass:"collapse-header",on:{click:e.toggleCollapse}},[o("h3",{staticClass:"panel-title"},[o("v-icon",{attrs:{left:""}},[e._v("mdi-cog-outline")]),e._v("\n      Model Controls\n    ")],1),e._v(" "),o("v-btn",{staticClass:"collapse-btn",attrs:{icon:"",small:""}},[o("v-icon",[e._v(e._s(e.isCollapsed?"mdi-chevron-down":"mdi-chevron-up"))])],1)],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapsed,expression:"!isCollapsed"}],staticClass:"panel-content"},[o("div",{staticClass:"control-section"},[o("h4",{staticClass:"control-title"},[e._v("Vessel Models")]),e._v(" "),o("div",{staticClass:"control-group"},[o("v-btn",{staticClass:"mb-2 arterial-btn",attrs:{color:"#DD3C51",block:"",disabled:e.isLoading,loading:e.isLoading,dark:""},on:{click:function(t){return e.$emit("reload-arterial")}}},[o("v-icon",{attrs:{left:""}},[e._v("mdi-arterial")]),e._v("\n          Arterial Tree\n        ")],1),e._v(" "),o("v-btn",{staticClass:"mb-2 venous-btn",attrs:{color:"#1F6683",block:"",disabled:e.isLoading,loading:e.isLoading,dark:""},on:{click:function(t){return e.$emit("load-venous")}}},[o("v-icon",{attrs:{left:""}},[e._v("mdi-heart-pulse")]),e._v("\n          Venous Tree\n        ")],1),e._v(" "),o("v-btn",{staticClass:"mb-2 combined-btn",attrs:{color:"#6C90B9",block:"",disabled:e.isLoading,loading:e.isLoading,dark:""},on:{click:function(t){return e.$emit("load-combined")}}},[o("v-icon",{attrs:{left:""}},[e._v("mdi-network")]),e._v("\n          Combined Trees\n        ")],1),e._v(" "),o("div",{staticClass:"colored-models"},[e._v("\n          Colored Models by: "+e._s(e.coloredModelsBy)+"\n          "),o("v-radio-group",{attrs:{inline:""},on:{change:function(t){return e.$emit("colored-models-by-changed",e.coloredModelsBy)}},model:{value:e.coloredModelsBy,callback:function(t){e.coloredModelsBy=t},expression:"coloredModelsBy"}},[o("v-radio",{attrs:{label:"Pressure",value:"pressure"}}),e._v(" "),o("v-radio",{attrs:{label:"Flux",value:"flux"}}),e._v(" "),o("v-radio",{attrs:{label:"Default",value:"default"}})],1)],1)],1)]),e._v(" "),o("br"),e._v(" "),"default"!==e.coloredModelsBy?o("div",{staticClass:"control-section"},[o("h4",{staticClass:"control-title"},[e._v(e._s(this.coloredModelsBy.slice(0,1).toUpperCase()+this.coloredModelsBy.slice(1))+" Scale")]),e._v(" "),o("div",{staticClass:"color-bar-container"},["pressure"===e.coloredModelsBy?o("div",{staticClass:"color-bar"},[o("div",{staticClass:"color-segment pressure-low-segment"}),e._v(" "),o("div",{staticClass:"color-segment pressure-mid-segment"}),e._v(" "),o("div",{staticClass:"color-segment pressure-high-segment"})]):"flux"===e.coloredModelsBy?o("div",{staticClass:"color-bar"},[o("div",{staticClass:"color-segment flux-reverse-segment"}),e._v(" "),o("div",{staticClass:"color-segment flux-low-segment"}),e._v(" "),o("div",{staticClass:"color-segment flux-mid-segment"}),e._v(" "),o("div",{staticClass:"color-segment flux-high-segment"}),e._v(" "),o("div",{staticClass:"color-segment flux-max-segment"})]):e._e(),e._v(" "),o("div",{staticClass:"color-labels"},["pressure"===e.coloredModelsBy?o("span",{staticClass:"label-left"},[e._v("Low Pressure")]):e._e(),e._v(" "),"pressure"===e.coloredModelsBy?o("span",{staticClass:"label-center"},[e._v("Normal")]):e._e(),e._v(" "),"pressure"===e.coloredModelsBy?o("span",{staticClass:"label-right"},[e._v("High Pressure")]):e._e(),e._v(" "),"flux"===e.coloredModelsBy?o("span",{staticClass:"label-left"},[e._v("Reverse Flow")]):e._e(),e._v(" "),"flux"===e.coloredModelsBy?o("span",{staticClass:"label-right"},[e._v("High Flow")]):e._e()])])]):e._e(),e._v(" "),"default"===e.coloredModelsBy?o("div",{staticClass:"control-section"},[o("h4",{staticClass:"control-title"},[e._v("Vessel Types")]),e._v(" "),e._m(0)]):e._e(),e._v(" "),o("br")])])}),[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"color-bar-container"},[o("div",{staticClass:"vessel-legend"},[o("div",{staticClass:"legend-item"},[o("div",{staticClass:"legend-color arterial-color"}),e._v(" "),o("span",{staticClass:"legend-text"},[e._v("Arterial (Red)")])]),e._v(" "),o("div",{staticClass:"legend-item"},[o("div",{staticClass:"legend-color venous-color"}),e._v(" "),o("span",{staticClass:"legend-text"},[e._v("Venous (Blue)")])])])])}],!1,null,"2d488838",null);t.default=component.exports;d()(component,{VBtn:c.a,VIcon:h.a,VRadio:m.a,VRadioGroup:f.a})},472:function(e,t,o){"use strict";o.r(t);var n=o(463),r=(o(65),o(66),o(533)),l={props:{waveform:Object},mounted:function(){var e=this;this.chart=r.a(this.$refs.chart),console.log("[Waveform] Component mounted, received waveform:",this.waveform),this.waveform&&this.waveform.data&&this.waveform.data.length>0?(this.chartTitle=this.waveform.title,this.chartData=this.waveform.data,this.isPlaying=this.waveform.isPlaying,this.speed=this.waveform.speed,console.log("[Waveform] Initializing chart with",this.chartData.length,"data points"),this.drawChart(),this.startPlayheadAnimation()):console.log("[Waveform] No valid waveform data provided"),this.resizeObserver=new ResizeObserver((function(){e.resizeChart()})),this.resizeObserver.observe(this.$refs.chart),window.addEventListener("resize",this.resizeChart)},watch:{waveform:{handler:function(e){console.log("[Waveform] Waveform data changed:",e),e&&e.data&&e.data.length>0&&(this.chartTitle=e.title,this.chartData=e.data,this.isPlaying=e.isPlaying,this.speed=e.speed,console.log("[Waveform] Updating chart with",this.chartData.length,"data points"),this.drawChart(),this.startPlayheadAnimation())},deep:!0,immediate:!0}},data:function(){return{chartData:[],chart:null,playheadIndex:0,playheadTimer:null,isPlaying:!1,chartTitle:"",speed:1}},methods:{resizeChart:function(){this.chart&&this.chart.resize()},drawChart:function(){if(this.chart&&this.chartData&&0!==this.chartData.length){var e=this.chartData.map((function(e,i){return i}));this.chart.setOption({grid:{left:5,right:5,top:5,bottom:5,containLabel:!1},xAxis:{type:"category",boundaryGap:!1,data:e,show:!1,axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1}},yAxis:{type:"value",min:Math.min.apply(Math,Object(n.a)(this.chartData))-.1*Math.abs(Math.min.apply(Math,Object(n.a)(this.chartData))),max:Math.max.apply(Math,Object(n.a)(this.chartData))+.1*Math.abs(Math.max.apply(Math,Object(n.a)(this.chartData))),show:!1,axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1}},series:[{data:this.chartData,type:"line",smooth:!0,showSymbol:!1,sampling:"none",large:!1,lineStyle:{width:2,color:"#1F6683"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(31, 102, 131, 0.3)"},{offset:1,color:"rgba(31, 102, 131, 0.05)"}]}},emphasis:{focus:"none"}}],dataZoom:[{type:"inside",start:0,end:100}],animation:!1,backgroundColor:"transparent"}),this.updatePlayhead()}else console.log("[Waveform] Cannot draw chart - missing data or chart not initialized")},startPlayheadAnimation:function(){var e=this;if(this.isPlaying){this.playheadTimer&&clearInterval(this.playheadTimer);var t=this.chartData.length,o=3e3/this.chartData.length*this.speed;this.playheadIndex=0,this.playheadTimer=setInterval((function(){e.playheadIndex+=1,e.playheadIndex>=t&&(e.playheadIndex=0),e.updatePlayhead()}),o)}},updatePlayhead:function(){if(this.chart){var e=this.chart.convertToPixel({xAxisIndex:0},this.playheadIndex);this.chart.setOption({graphic:[{id:"playhead",type:"line",shape:{x1:e,y1:0,x2:e,y2:this.chart.getHeight()},style:{stroke:"#DD3C51",lineWidth:2},z:10}]})}}},beforeDestroy:function(){this.playheadTimer&&clearInterval(this.playheadTimer),this.resizeObserver&&this.resizeObserver.disconnect(),window.removeEventListener("resize",this.resizeChart),this.chart&&this.chart.dispose()}},d=(o(479),o(44)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"waveform-container"},[o("div",{ref:"chart",staticClass:"waveform-chart"}),e._v(" "),o("div",{staticClass:"waveform-title"},[e._v(e._s(e.chartTitle))])])}),[],!1,null,"04b23ab3",null);t.default=component.exports},473:function(e,t,o){"use strict";o.r(t);o(92),o(65),o(17),o(6),o(159),o(59);var n={name:"ConditionSelector",data:function(){return{isCollapsed:!0,selectedConditions:[],visualizationStatus:"Normal",textContent:{panelTitle:"Pregnancy Conditions",controlTitles:{selectConditions:"Select Conditions",selectedConditions:"Selected Conditions",modelVisualization:"Model Visualization",status:"Status"},labels:{currentConditions:"Current Conditions",visualizeChanges:"Visualize Changes",normalPlacenta:"Normal Placenta"},statusLabels:{activeConditions:"Active Conditions:",modelState:"Model State:"}},pregnancyConditions:[{key:"sga",label:"Small for Gestational Age (SGA)",abbreviation:"SGA",severity:"warning",placentalEffect:"Smaller placental size with increased resistance patterns"},{key:"fgr",label:"Fetal Growth Restriction (FGR)",abbreviation:"FGR",severity:"error",placentalEffect:"Reduced placental perfusion and increased resistance indices"},{key:"pe",label:"Preeclampsia (PE)",abbreviation:"PE",severity:"error",placentalEffect:"Increased uterine artery resistance and notching"},{key:"sga_pe",label:"Small Baby with Preeclampsia",abbreviation:"SGA+PE",severity:"error",placentalEffect:"Combined effects: smaller placenta with severely compromised blood flow"},{key:"gdm",label:"Gestational Diabetes Mellitus (GDM)",abbreviation:"GDM",severity:"info",placentalEffect:"Larger placental size but typically normal vascular patterns"},{key:"iugr",label:"Intrauterine Growth Restriction (IUGR)",abbreviation:"IUGR",severity:"error",placentalEffect:"Compromised placental function with abnormal Doppler patterns"},{key:"normal",label:"Normal Pregnancy",abbreviation:"Normal",severity:"success",placentalEffect:"Normal placental size and vascular patterns expected"}]}},methods:{toggleCollapse:function(){this.isCollapsed=!this.isCollapsed,this.isCollapsed?this.$emit("panel-collapsed"):this.$emit("panel-expanded")},updateVisualization:function(){if(this.selectedConditions.length>0){var e=this.getSelectedConditionDetails().map((function(e){return e.abbreviation})).join(", ");this.visualizationStatus=e}else this.visualizationStatus="Normal";this.$emit("conditions-changed",{selectedConditions:this.selectedConditions,conditionDetails:this.getSelectedConditionDetails(),combinedEffect:this.getCombinedEffectDescription()})},removeCondition:function(e){this.selectedConditions=this.selectedConditions.filter((function(t){return t!==e})),this.updateVisualization()},getSelectedConditionDetails:function(){var e=this;return this.selectedConditions.map((function(t){return e.pregnancyConditions.find((function(e){return e.key===t}))})).filter(Boolean)},getCombinedEffectSeverity:function(){var e=this.getSelectedConditionDetails(),t=e.some((function(e){return"error"===e.severity})),o=e.some((function(e){return"warning"===e.severity}));return t?"error":o?"warning":"info"},getCombinedEffectDescription:function(){var e=this.getSelectedConditionDetails();if(0===e.length)return"";if(1===e.length)return e[0].placentalEffect;var t=e.some((function(e){return["sga","fgr","iugr"].includes(e.key)})),o=e.some((function(e){return["pe","sga_pe"].includes(e.key)})),n=e.some((function(e){return"gdm"===e.key}));return t&&o?"Severe placental compromise with markedly increased resistance and reduced size":t&&n?"Conflicting effects: diabetes may increase size while growth restriction reduces it":o?"Significant vascular compromise with increased resistance patterns":t?"Reduced placental function with compromised blood flow patterns":"Multiple conditions present - effects may vary based on severity and timing"},triggerVisualization:function(){var e={selectedConditions:this.selectedConditions,conditionDetails:this.getSelectedConditionDetails(),combinedEffect:this.getCombinedEffectDescription()};this.$emit("trigger-visualization",e),console.log("[ConditionSelector] Visualization triggered:",e)},resetToNormal:function(){this.selectedConditions=[],this.visualizationStatus="Normal",this.updateVisualization(),this.$emit("reset-to-normal")}}},r=(o(481),o(44)),l=o(63),d=o.n(l),c=o(458),h=o(540),m=o(448),f=o(617),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"condition-control"},[o("div",{staticClass:"collapse-header",on:{click:e.toggleCollapse}},[o("h3",{staticClass:"panel-title"},[o("v-icon",{attrs:{left:""}},[e._v("mdi-medical-bag")]),e._v("\n      "+e._s(e.textContent.panelTitle)+"\n    ")],1),e._v(" "),o("v-btn",{staticClass:"collapse-btn",attrs:{icon:"",small:""}},[o("v-icon",[e._v(e._s(e.isCollapsed?"mdi-chevron-down":"mdi-chevron-up"))])],1)],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapsed,expression:"!isCollapsed"}],staticClass:"panel-content"},[o("div",{staticClass:"control-section"},[o("h4",{staticClass:"control-title"},[e._v(e._s(e.textContent.controlTitles.selectConditions))]),e._v(" "),o("div",{staticClass:"control-group"},[o("v-select",{attrs:{items:e.pregnancyConditions,"item-text":"label","item-value":"key",label:"Current Conditions",multiple:"",outlined:"",dense:"",dark:"",clearable:""},on:{change:e.updateVisualization},scopedSlots:e._u([{key:"selection",fn:function(t){var n=t.item,r=t.index;return[r<2?o("v-chip",{key:n.key,attrs:{color:n.severity,dark:"",small:"",close:""},on:{"click:close":function(t){return e.removeCondition(n.key)}}},[e._v("\n              "+e._s(n.abbreviation)+"\n            ")]):e._e(),e._v(" "),2===r?o("span",{staticClass:"grey--text caption"},[e._v("\n              (+"+e._s(e.selectedConditions.length-2)+" others)\n            ")]):e._e()]}}]),model:{value:e.selectedConditions,callback:function(t){e.selectedConditions=t},expression:"selectedConditions"}})],1)]),e._v(" "),e.selectedConditions.length>0?o("div",{staticClass:"control-section"},[o("h4",{staticClass:"control-title"},[e._v("Selected Conditions")]),e._v(" "),o("div",{staticClass:"selected-conditions"},e._l(e.getSelectedConditionDetails(),(function(t){return o("v-chip",{key:t.key,staticClass:"mr-2 mb-1",attrs:{color:t.severity,dark:"",small:""}},[e._v("\n          "+e._s(t.abbreviation)+"\n        ")])})),1)]):e._e(),e._v(" "),o("div",{staticClass:"control-section"},[o("h4",{staticClass:"control-title"},[e._v("Model Visualization")]),e._v(" "),o("div",{staticClass:"control-group"},[o("v-btn",{staticClass:"mb-2",attrs:{disabled:0===e.selectedConditions.length,color:"secondary",block:""},on:{click:e.triggerVisualization}},[o("v-icon",{attrs:{left:""}},[e._v("mdi-eye")]),e._v("\n          Visualize Changes\n        ")],1),e._v(" "),o("v-btn",{staticClass:"mb-2",attrs:{color:"success",block:""},on:{click:e.resetToNormal}},[o("v-icon",{attrs:{left:""}},[e._v("mdi-restore")]),e._v("\n          Normal Placenta\n        ")],1)],1)]),e._v(" "),o("div",{staticClass:"control-section"},[o("h4",{staticClass:"control-title"},[e._v("Status")]),e._v(" "),o("div",{staticClass:"status-info"},[o("div",{staticClass:"status-row"},[o("span",{staticClass:"status-label"},[e._v("Active Conditions:")]),e._v(" "),o("span",{staticClass:"status-value"},[e._v(e._s(e.selectedConditions.length))])]),e._v(" "),o("div",{staticClass:"status-row"},[o("span",{staticClass:"status-label"},[e._v("Model State:")]),e._v(" "),o("span",{staticClass:"status-value"},[e._v(e._s(e.visualizationStatus))])])])])])])}),[],!1,null,"ed6b0da4",null);t.default=component.exports;d()(component,{VBtn:c.a,VChip:h.a,VIcon:m.a,VSelect:f.a})},477:function(e,t,o){"use strict";o(466)},478:function(e,t,o){var n=o(25)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Bad+Script&family=Raleway:wght@100;300&display=swap);"]),n.push([e.i,'.model-control[data-v-2d488838]{position:relative;width:100%;background:rgba(49,54,87,.9);border-radius:12px;color:#d1c7b5;box-shadow:0 4px 20px rgba(31,102,131,.3);border:2px solid #1f6683;overflow:hidden;margin-bottom:16px}.collapse-header[data-v-2d488838]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;cursor:pointer;border-bottom:1px solid hsla(0,0%,100%,.1);transition:background-color .2s ease}.collapse-header[data-v-2d488838]:hover{background:hsla(0,0%,100%,.05)}.panel-title[data-v-2d488838]{margin:0;font-size:18px;font-weight:600;color:#d1c7b5;display:flex;align-items:center}.collapse-btn[data-v-2d488838]{transition:transform .2s ease}.panel-content[data-v-2d488838]{padding:20px;-webkit-animation:slideDown-data-v-2d488838 .3s ease-out;animation:slideDown-data-v-2d488838 .3s ease-out}@-webkit-keyframes slideDown-data-v-2d488838{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes slideDown-data-v-2d488838{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.control-section[data-v-2d488838]{margin-bottom:20px}.control-section[data-v-2d488838]:last-child{margin-bottom:0}.control-title[data-v-2d488838]{color:#6c90b9;font-size:14px;font-weight:600;margin-bottom:12px;text-transform:uppercase;letter-spacing:.5px}.controls-content[data-v-2d488838]{padding:50px 20px 20px;color:#fff}.control-row[data-v-2d488838]{margin-bottom:16px;display:flex;justify-content:center}.control-row[data-v-2d488838]:last-child{margin-bottom:0}.pressure-color-section[data-v-2d488838]{background:hsla(0,0%,100%,.08);border-radius:12px;padding:16px;margin-bottom:16px;border-left:4px solid #7a3520}.color-bar-title[data-v-2d488838]{color:hsla(0,0%,100%,.9);font-size:12px;font-weight:600;margin-bottom:12px;display:flex;align-items:center;text-transform:uppercase;letter-spacing:.5px}.color-bar-container[data-v-2d488838]{margin-bottom:8px}.color-bar[data-v-2d488838]{width:100%;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,.3);border:1px solid hsla(0,0%,100%,.2)}.color-segment[data-v-2d488838]{height:100%}.color-bar-labels[data-v-2d488838]{display:flex;justify-content:center;align-items:center;margin-top:8px;font-size:10px;color:hsla(0,0%,100%,.7);font-weight:500}.label-max[data-v-2d488838],.label-min[data-v-2d488838]{font-family:"Courier New",monospace;color:hsla(0,0%,100%,.8)}.label-mid[data-v-2d488838]{color:hsla(0,0%,100%,.6);font-style:italic}.color-bar-description[data-v-2d488838]{text-align:center;margin-top:8px}.color-bar-description small[data-v-2d488838]{color:hsla(0,0%,100%,.6);font-size:10px;font-style:italic}.color-legend[data-v-2d488838]{display:flex;flex-wrap:wrap;grid-gap:6px;gap:6px;margin-top:12px;justify-content:center}.legend-row[data-v-2d488838]{display:flex;align-items:center;grid-gap:4px;gap:4px;min-width:0;flex:1}.legend-color[data-v-2d488838]{width:12px;height:12px;border-radius:2px;flex-shrink:0}.legend-text[data-v-2d488838]{font-size:9px;color:hsla(0,0%,100%,.8);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.info-section[data-v-2d488838]{background:hsla(0,0%,100%,.05);border-radius:12px;padding:16px;margin-top:16px;border-left:4px solid #2f414b}.info-item[data-v-2d488838]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.info-item[data-v-2d488838]:last-child{margin-bottom:0}.info-label[data-v-2d488838]{color:hsla(0,0%,100%,.7);font-size:12px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.info-value[data-v-2d488838]{color:hsla(0,0%,100%,.95);font-size:12px;font-weight:600;text-align:right;max-width:60%;word-break:break-word}.color-bar-container[data-v-2d488838]{padding:8px 12px;background:hsla(0,0%,100%,.05);border-radius:8px;border:1px solid hsla(0,0%,100%,.1)}.color-bar[data-v-2d488838]{display:flex;height:20px;border-radius:4px;overflow:hidden;margin-bottom:8px;box-shadow:0 2px 4px rgba(0,0,0,.2)}.color-segment[data-v-2d488838]{flex:1;transition:transform .2s ease}.color-segment[data-v-2d488838]:hover{transform:scaleY(1.1)}.pressure-low-segment[data-v-2d488838]{background:linear-gradient(90deg,#2b4b3c,#aa988a)}.pressure-mid-segment[data-v-2d488838]{background:linear-gradient(90deg,#aa988a,#b66a40)}.pressure-high-segment[data-v-2d488838]{background:linear-gradient(90deg,#b66a40,#7a3520)}.flux-reverse-segment[data-v-2d488838]{background:linear-gradient(90deg,#001acc,#1a4dcc)}.flux-low-segment[data-v-2d488838]{background:linear-gradient(90deg,#1a4dcc,#0cc)}.flux-mid-segment[data-v-2d488838]{background:linear-gradient(90deg,#0cc,#4dff4d)}.flux-high-segment[data-v-2d488838]{background:linear-gradient(90deg,#4dff4d,#ff0)}.flux-max-segment[data-v-2d488838]{background:linear-gradient(90deg,#ff0,red)}.vessel-legend[data-v-2d488838]{justify-content:space-around;padding:8px 0}.legend-item[data-v-2d488838],.vessel-legend[data-v-2d488838]{display:flex;align-items:center}.legend-item[data-v-2d488838]{grid-gap:8px;gap:8px}.legend-color[data-v-2d488838]{width:16px;height:16px;border-radius:3px;border:1px solid hsla(0,0%,100%,.3)}.legend-color.arterial-color[data-v-2d488838]{background:#f22}.legend-color.venous-color[data-v-2d488838]{background:#22f}.legend-text[data-v-2d488838]{font-size:12px}.color-labels[data-v-2d488838],.legend-text[data-v-2d488838]{color:#d1c7b5;font-weight:500}.color-labels[data-v-2d488838]{display:flex;justify-content:space-between;font-size:11px}.label-center[data-v-2d488838],.label-left[data-v-2d488838],.label-right[data-v-2d488838]{flex:1;text-align:center}.label-left[data-v-2d488838]{text-align:left}.label-right[data-v-2d488838]{text-align:right}.v-btn[data-v-2d488838]{text-transform:none!important;font-weight:600!important;box-shadow:0 3px 12px rgba(0,0,0,.2)!important;transition:all .3s ease!important}.v-btn.arterial-btn[data-v-2d488838]{background-color:#dd3c51!important;border-color:#dd3c51!important}.v-btn.arterial-btn[data-v-2d488838]:hover:not(:disabled){background-color:#c13347!important;box-shadow:0 6px 20px rgba(221,60,81,.4)!important;transform:translateY(-2px)}.v-btn.venous-btn[data-v-2d488838]{background-color:#1f6683!important;border-color:#1f6683!important}.v-btn.venous-btn[data-v-2d488838]:hover:not(:disabled){background-color:#1a5a75!important;box-shadow:0 6px 20px rgba(31,102,131,.4)!important;transform:translateY(-2px)}.v-btn.combined-btn[data-v-2d488838]{background-color:#6c90b9!important;border-color:#6c90b9!important}.v-btn.combined-btn[data-v-2d488838]:hover:not(:disabled){background-color:#5f7fa5!important;box-shadow:0 6px 20px rgba(108,144,185,.4)!important;transform:translateY(-2px)}.status-text[data-v-2d488838]{font-family:"Courier New",monospace;font-weight:600;font-size:14px;letter-spacing:2px}.v-btn-toggle[data-v-2d488838]{border-radius:8px!important}.v-btn-toggle .v-btn[data-v-2d488838]{text-transform:none!important;font-weight:500!important;min-width:100px}.v-btn-toggle .v-btn.v-btn--active[data-v-2d488838]{box-shadow:0 2px 8px rgba(0,0,0,.3)!important}.control-panel[data-v-2d488838]{transition:all .3s cubic-bezier(.4,0,.2,1)}.control-panel .controls-content[data-v-2d488838]{transition:opacity .2s ease}.control-panel.collapsed .controls-content[data-v-2d488838]{opacity:0}.waveform-section[data-v-2d488838]{margin:16px 0}',""]),e.exports=n},479:function(e,t,o){"use strict";o(467)},480:function(e,t,o){var n=o(25)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Bad+Script&family=Raleway:wght@100;300&display=swap);"]),n.push([e.i,".waveform-container[data-v-04b23ab3]{width:100%;height:100%;display:flex;flex-direction:column}.waveform-chart[data-v-04b23ab3]{width:100%;flex:1;min-height:100px;max-height:200px}@media(min-width:1200px){.waveform-chart[data-v-04b23ab3]{min-height:120px;max-height:250px}}@media(min-width:1600px){.waveform-chart[data-v-04b23ab3]{min-height:140px;max-height:300px}}@media(min-width:2000px){.waveform-chart[data-v-04b23ab3]{min-height:160px;max-height:350px}}.waveform-title[data-v-04b23ab3]{font-size:12px;color:hsla(0,0%,100%,.7);text-align:center;margin-top:8px;padding:0 5px}@media(min-width:1200px){.waveform-title[data-v-04b23ab3]{font-size:13px;margin-top:10px}}",""]),e.exports=n},481:function(e,t,o){"use strict";o(468)},482:function(e,t,o){var n=o(25)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Bad+Script&family=Raleway:wght@100;300&display=swap);"]),n.push([e.i,".condition-control[data-v-ed6b0da4]{position:relative;width:100%;background:rgba(49,54,87,.9);border-radius:12px;color:#d1c7b5;box-shadow:0 4px 20px rgba(31,102,131,.3);border:2px solid #1f6683;overflow:hidden;margin-bottom:16px}.collapse-header[data-v-ed6b0da4]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;cursor:pointer;border-bottom:1px solid hsla(0,0%,100%,.1);transition:background-color .2s ease}.collapse-header[data-v-ed6b0da4]:hover{background:hsla(0,0%,100%,.05)}.panel-title[data-v-ed6b0da4]{margin:0;font-size:18px;font-weight:600;color:#d1c7b5;display:flex;align-items:center}.collapse-btn[data-v-ed6b0da4]{transition:transform .2s ease}.panel-content[data-v-ed6b0da4]{padding:20px;-webkit-animation:slideDown-data-v-ed6b0da4 .3s ease-out;animation:slideDown-data-v-ed6b0da4 .3s ease-out}@-webkit-keyframes slideDown-data-v-ed6b0da4{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes slideDown-data-v-ed6b0da4{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.control-section[data-v-ed6b0da4]{margin-bottom:20px}.control-section[data-v-ed6b0da4]:last-child{margin-bottom:0}.control-title[data-v-ed6b0da4]{color:#6c90b9;font-size:14px;font-weight:600;margin-bottom:12px;text-transform:uppercase;letter-spacing:.5px}.control-group[data-v-ed6b0da4]{margin-bottom:8px}.selected-conditions[data-v-ed6b0da4]{display:flex;flex-wrap:wrap;grid-gap:4px;gap:4px}.selected-conditions[data-v-ed6b0da4],.status-info[data-v-ed6b0da4]{background:hsla(0,0%,100%,.05);border-radius:8px;padding:12px;border:1px solid hsla(0,0%,100%,.1)}.status-row[data-v-ed6b0da4]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.status-row[data-v-ed6b0da4]:last-child{margin-bottom:0}.status-label[data-v-ed6b0da4]{color:hsla(0,0%,100%,.7);font-size:12px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.status-value[data-v-ed6b0da4]{color:hsla(0,0%,100%,.95);font-size:12px;font-weight:600;text-align:right;max-width:60%;word-break:break-word}.v-btn[data-v-ed6b0da4]{text-transform:none!important;font-weight:500!important}[data-v-ed6b0da4] .v-select .v-input__control .v-input__slot{background:hsla(0,0%,100%,.1)!important;border-color:hsla(0,0%,100%,.3)!important}[data-v-ed6b0da4] .v-select .v-input__icon,[data-v-ed6b0da4] .v-select .v-label{color:hsla(0,0%,100%,.7)!important}[data-v-ed6b0da4] .v-chip{margin:2px!important}",""]),e.exports=n},483:function(e,t,o){var content=o(531);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(26).default)("10361e18",content,!0,{sourceMap:!1})},484:function(e,t,o){e.exports=o.p+"img/gestures-icons.dd2f564.png"},485:function(e,t,o){"use strict";o(469)},486:function(e,t,o){var n=o(25)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Bad+Script&family=Raleway:wght@100;300&display=swap);"]),n.push([e.i,".baseModelControl[data-v-999fcde8]{width:100vw;height:120px;display:flex;flex-direction:row;justify-content:center;align-content:center}.baseModelControl .baseModelCB[data-v-999fcde8]{width:240px;height:70px;position:relative}.baseModelControl .baseModelCB-md[data-v-999fcde8]{width:280px;height:100px}.baseModelControl-md[data-v-999fcde8]{position:fixed;bottom:10px;padding-left:100px}.baseModelControl-sm[data-v-999fcde8]{order:-1;height:60px}.model-info[data-v-999fcde8]{font-size:1.2em;left:50%;transform:translateX(-50%);top:1%;position:absolute;color:#fff;z-index:1000}.model[data-v-999fcde8]{position:relative;width:100%;height:100%}.baseDom-md[data-v-999fcde8]{width:100%;height:100vh}.baseDom-sm[data-v-999fcde8]{width:100%;height:100vw}",""]),e.exports=n},508:function(e,t,o){"use strict";o.r(t);var n=o(1),r=o(30),l=(o(108),o(84),o(59),o(67),o(36),o(66),o(12),o(10),o(17),o(6),o(20),o(11),o(21),o(50),o(34),o(70),o(74),o(16)),d=o(463),c=o(28),h=o(29);o(204),o(51),o(205),o(206),o(207),o(208),o(209),o(210),o(211),o(212),o(213),o(214),o(215),o(216),o(217),o(52),o(22),o(69),o(93),o(65),o(490),o(491),o(492),o(493),o(494),o(495),o(496),o(497),o(498),o(499),o(500),o(501),o(502),o(503),o(504),o(505),o(506),o(507),o(68);function m(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,d=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return l=e.done,e},e:function(e){d=!0,r=e},f:function(){try{l||null==o.return||o.return()}finally{if(d)throw r}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var x=16720418,w=.9,C=.1,T={NONLINEAR_EXPONENT:.4,NEUTRAL_VALUE:.5,LOW_TO_MID:{RED_START:.23,RED_RANGE:.75,GREEN_START:.7,GREEN_RANGE:.23,BLUE_START:.27,BLUE_RANGE:-.27},MID_TO_HIGH:{RED_START:.98,RED_RANGE:-.42,GREEN_START:.93,GREEN_RANGE:-.81,BLUE_START:0}},M={AMBIENT_COLOR:6702148,AMBIENT_INTENSITY:.6,MAIN_LIGHT_COLOR:16777215,MAIN_LIGHT_INTENSITY:.8,FILL_LIGHT_COLOR:16772829,FILL_LIGHT_INTENSITY:.4,RIM_LIGHT_COLOR:11206655,RIM_LIGHT_INTENSITY:.3,INTERNAL_LIGHT1_COLOR:16737894,INTERNAL_LIGHT1_INTENSITY:.5,INTERNAL_LIGHT1_DISTANCE:100,INTERNAL_LIGHT2_COLOR:6711039,INTERNAL_LIGHT2_INTENSITY:.3,INTERNAL_LIGHT2_DISTANCE:80},_=function(){function e(t,o){Object(c.a)(this,e),this.THREE=t,this.scene=o,this.currentVTKMesh=null,this.wireframeMesh=null,this.lightingInitialized=!1,this.performanceMode="high",this.allVTKMeshes=[],this.enableLoD=!0,this.lodCache=new Map}var t,o,n,f;return Object(h.a)(e,[{key:"loadVTKFile",value:(f=Object(r.a)(regeneratorRuntime.mark((function e(t){var o,n,r,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=l.length>1&&void 0!==l[1]?l[1]:{},n=o.modelSize||420,(r=y({displayName:"placental model",color:x,opacity:w,modelSize:n,lineWidth:o.lineWidth||Math.max(2,Math.round(n/70)),pointSize:o.pointSize||Math.max(8,Math.round(n/17)),enableWireframe:!0,useCylinderGeometry:!0,cylinderSegments:10,colorMappingType:"pressure",clearScene:!0,useLoD:!0,onProgress:null,onComplete:null},o)).onProgress&&r.onProgress("Initializing ".concat(r.displayName),0),e.prev=4,!r.useLoD||!this.enableLoD){e.next=11;break}return e.next=8,this.loadWithLoD(t,r);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,this.loadStandard(t,r);case 13:e.t0=e.sent;case 14:return e.abrupt("return",e.t0);case 17:return e.prev=17,e.t1=e.catch(4),console.error("[VTKLoader] Failed to load VTK file ".concat(t,":"),e.t1),e.abrupt("return",{success:!1,error:e.t1});case 21:case"end":return e.stop()}}),e,this,[[4,17]])}))),function(e){return f.apply(this,arguments)})},{key:"fetchVTKFile",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(t){var o,n,r,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=l.length>1&&void 0!==l[1]?l[1]:null)&&o("Downloading model data...",20),e.next=4,fetch(t);case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("HTTP ".concat(n.status,": ").concat(n.statusText));case 7:return e.next=9,n.text();case 9:return r=e.sent,o&&o("Processing model data",40),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"parseVTKData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2?arguments[2]:void 0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};t&&t("Building model geometry",60);for(var l=e.split("\n"),c=[],h=!1,m=!1,f=!1,v=!1,y=!1,x=[],w=[],C=[],T=[],M=0,_=[],i=0;i<l.length;i++){var line=l[i].trim();if(t&&i%1e3==0){var progress=60+i/l.length*20;t("Building model geometry",progress)}if(line.startsWith("POINTS")){var E=line.split(" ");M=parseInt(E[1]),h=!0,m=!1,f=!1,v=!1}else if(line.startsWith("CELLS")||line.startsWith("POLYGONS")||line.startsWith("LINES"))h=!1,m=!0,f=!1,v=!1,y=!1;else if(line.startsWith("POINT_DATA"))h=!1,m=!1,f=!1,v=!1,y=!1;else if(line.startsWith("SCALARS")){var R=line.split(" ");if(R.length>1){var S=R[1].toLowerCase();"radius"===S?(f=!0,v=!1,y=!1):"pressure"===S?(f=!1,v=!0,y=!1):"flux"===S||"flow"===S?(f=!1,v=!1,y=!0):(f=!1,v=!1,y=!1)}h=!1,m=!1}else if(!line.startsWith("LOOKUP_TABLE")){if(h&&x.length<3*M){var D=line.split(" ").filter((function(e){return""!==e})).map(parseFloat);x.push.apply(x,Object(d.a)(D))}if(f&&w.length<M){var L=line.split(" ").filter((function(e){return""!==e})).map(parseFloat);w.push.apply(w,Object(d.a)(L))}if(v&&C.length<M){var k=line.split(" ").filter((function(e){return""!==e})).map(parseFloat);C.push.apply(C,Object(d.a)(k))}if(y&&T.length<M){var P=line.split(" ").filter((function(e){return""!==e})).map(parseFloat);T.push.apply(T,Object(d.a)(P))}if(m&&""!==line.trim()&&!line.startsWith("CELL_TYPES")&&!line.startsWith("POINT_DATA")&&!line.startsWith("SCALARS")&&!line.startsWith("LOOKUP_TABLE")){var N=line.split(" ").filter((function(e){return""!==e})),z=N.map((function(e){return parseInt(e)})).filter((function(e){return!isNaN(e)}));if(z.length>1){var A=z[0];if(z.length===A+1&&(_.push(z),!n))for(var O=1;O<A;O++){var I=z[O],V=z[O+1];void 0===V||isNaN(I)||isNaN(V)||3*I+2<x.length&&3*V+2<x.length&&c.push(x[3*I],x[3*I+1],x[3*I+2],x[3*V],x[3*V+1],x[3*V+2])}}}(line.startsWith("CELL_TYPES")||line.startsWith("POINT_DATA"))&&(m=!1)}}var B=new this.THREE.BufferGeometry;if(n&&w.length>0&&_.length>0){var H=this.createCylinderGeometry(x,w,C,T,_,o,r);return{geometry:H,isPointCloud:!1,radiusData:w,pressureData:C,fluxData:T}}if(0===c.length&&console.warn("[VTKLoader] No line segments created! Using point cloud fallback."),0===c.length&&x.length>0)return B.setAttribute("position",new this.THREE.Float32BufferAttribute(x,3)),w.length>0&&B.setAttribute("radius",new this.THREE.Float32BufferAttribute(w,1)),C.length>0&&B.setAttribute("pressure",new this.THREE.Float32BufferAttribute(C,1)),T.length>0&&B.setAttribute("flux",new this.THREE.Float32BufferAttribute(T,1)),{geometry:B,isPointCloud:!0,radiusData:w,pressureData:C,fluxData:T};B.setAttribute("position",new this.THREE.Float32BufferAttribute(c,3)),B.computeBoundingBox();var $=B.boundingBox.getCenter(new this.THREE.Vector3),j=B.boundingBox.getSize(new this.THREE.Vector3),G=Math.max(j.x,j.y,j.z),U=o/G;return B.translate(-$.x,-$.y,-$.z),B.scale(U,U,U),{geometry:B,isPointCloud:!1,radiusData:w,pressureData:C,fluxData:T}}},{key:"createCylinderGeometry",value:function(e,t,o,n,r,l,c){var h=new this.THREE.BufferGeometry,f=[],v=[],y=[],x=[],w=0,T=1/0,M=-1/0,_=1/0,E=-1/0;"pressure"===c.colorMappingType&&o.length>0?(T=Math.min.apply(Math,Object(d.a)(o)),M=Math.max.apply(Math,Object(d.a)(o))):"flux"===c.colorMappingType&&n.length>0&&(_=Math.min.apply(Math,Object(d.a)(n)),E=Math.max.apply(Math,Object(d.a)(n)));var R,S=this.detectBranchingPoints(r,e.length/3),D=m(r);try{for(D.s();!(R=D.n()).done;)for(var L=R.value,k=L[0],i=1;i<k;i++){var P=L[i],N=L[i+1];if(void 0!==N&&P<e.length/3&&N<e.length/3){var z=new this.THREE.Vector3(e[3*P],e[3*P+1],e[3*P+2]),A=new this.THREE.Vector3(e[3*N],e[3*N+1],e[3*N+2]),O=t[P]||C,I=t[N]||C,V=void 0,B=void 0;if("pressure"===c.colorMappingType&&o.length>0){var H=o[P]||0,$=o[N]||0;V=this.pressureToColor(H,T,M),B=this.pressureToColor($,T,M)}else if("flux"===c.colorMappingType&&n.length>0){var j=n[P]||0,G=n[N]||0;V=this.fluxToColor(j,_,E),B=this.fluxToColor(G,_,E)}else c.colorMappingType,V=new this.THREE.Color(1,1,1),B=new this.THREE.Color(1,1,1);var U=S.has(P),F=S.has(N),W=this.createTaperedCylinder(z,A,O,I,8,V,B,U,F),K=W.vertices,Y=W.normals,J=W.colors,X=W.indices;f.push.apply(f,Object(d.a)(K)),v.push.apply(v,Object(d.a)(Y)),y.push.apply(y,Object(d.a)(J));var Q,Z=m(X);try{for(Z.s();!(Q=Z.n()).done;){var ee=Q.value;x.push(ee+w)}}catch(e){Z.e(e)}finally{Z.f()}w+=K.length/3}}}catch(e){D.e(e)}finally{D.f()}this.createBranchingJunctions(S,e,t,o,n,T,M,_,E,f,v,y,x,w,c),h.setAttribute("position",new this.THREE.Float32BufferAttribute(f,3)),h.setAttribute("normal",new this.THREE.Float32BufferAttribute(v,3)),h.setAttribute("color",new this.THREE.Float32BufferAttribute(y,3)),h.setIndex(x),h.computeBoundingBox();var te=h.boundingBox.getCenter(new this.THREE.Vector3),ae=h.boundingBox.getSize(new this.THREE.Vector3),oe=l/Math.max(ae.x,ae.y,ae.z);return h.translate(-te.x,-te.y,-te.z),h.scale(oe,oe,oe),h}},{key:"pressureToColor",value:function(e,t,o){var n=o>t?(e-t)/(o-t):T.NEUTRAL_VALUE,r=Math.pow(n,T.NONLINEAR_EXPONENT),l=new this.THREE.Color;if(r<T.NEUTRAL_VALUE){var d=2*r,c=T.LOW_TO_MID;l.setRGB(c.RED_START+d*c.RED_RANGE,c.GREEN_START+d*c.GREEN_RANGE,c.BLUE_START+d*c.BLUE_RANGE)}else{var h=2*(r-T.NEUTRAL_VALUE),m=T.MID_TO_HIGH;l.setRGB(m.RED_START+h*m.RED_RANGE,m.GREEN_START+h*m.GREEN_RANGE,m.BLUE_START)}return l}},{key:"determineVesselType",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t[e]||C;if(o&&o.length>0){var l=o[e]||0,d=o.reduce((function(a,b){return a+b}),0)/o.length;return l>d?"arterial":"venous"}if(n&&n.length>0){var c=n[e]||0;return c>0?"arterial":"venous"}var h=t.reduce((function(a,b){return a+b}),0)/t.length;return r>h?"arterial":"venous"}},{key:"fluxToColor",value:function(e,t,o){var n=new this.THREE.Color;if(o===t)return n.setRGB(.5,.5,.5),n;var r,l=Math.abs(t),d=Math.abs(o),c=.01*Math.max(l,d),h=Math.sign(e)*Math.log(Math.abs(e)+c),m=Math.sign(t)*Math.log(Math.abs(t)+c),f=Math.sign(o)*Math.log(Math.abs(o)+c)-m;r=0!==f?(h-m)/f:.5;var v=2*Math.pow(r,.3)-1;if(v<-.8)n.setRGB(0,.1,.9);else if(v<-.5){var y=(v+.8)/.3;n.setRGB(0+.1*y,.1+.4*y,.9+.1*y)}else if(v<-.2){var x=(v+.5)/.3;n.setRGB(.1+.1*x,.5+.3*x,1-.2*x)}else if(v<.1){var w=(v+.2)/.3;n.setRGB(.2-.2*w,.8+.2*w,.8-.3*w)}else if(v<.4){var C=(v-.1)/.3;n.setRGB(0+.3*C,1,.5-.5*C)}else if(v<.7){var T=(v-.4)/.3;n.setRGB(.3+.7*T,1,0)}else{var M=(v-.7)/.3;n.setRGB(1,1-1*M,0)}return n}},{key:"createTaperedCylinder",value:function(e,t,o,n,r,l,d){var c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8],m=[],f=[],v=[],y=[],x=(new this.THREE.Vector3).subVectors(t,e).normalize(),w=e.clone(),C=t.clone(),T=o,M=n;if(c){var _=Math.max(.08*o,.005);w.add(x.clone().multiplyScalar(-_)),T=1.02*o}if(h){var E=Math.max(.08*n,.005);C.add(x.clone().multiplyScalar(E)),M=1.02*n}var R=new this.THREE.Vector3(0,1,0),S=(new this.THREE.Vector3).crossVectors(x,R).normalize();S.lengthSq()<.1&&S.crossVectors(x,new this.THREE.Vector3(1,0,0)).normalize();for(var D=(new this.THREE.Vector3).crossVectors(S,x).normalize(),L=0;L<=1;L++)for(var k=L,P=(new this.THREE.Vector3).lerpVectors(w,C,k),N=T+(M-T)*k,z=(new this.THREE.Color).lerpColors(l,d,k),A=0;A<r;A++){var O=A/r*Math.PI*2,I=Math.cos(O)*N,V=Math.sin(O)*N,B=(new this.THREE.Vector3).copy(P).add(S.clone().multiplyScalar(I)).add(D.clone().multiplyScalar(V));m.push(B.x,B.y,B.z);var H=(new this.THREE.Vector3).copy(S.clone().multiplyScalar(I)).add(D.clone().multiplyScalar(V)).normalize();f.push(H.x,H.y,H.z),v.push(z.r,z.g,z.b)}for(var $=0;$<1;$++)for(var j=0;j<r;j++){var G=$*r+j,U=$*r+(j+1)%r,F=($+1)*r+j,W=($+1)*r+(j+1)%r;y.push(G,U,F),y.push(F,U,W)}return{vertices:m,normals:f,colors:v,indices:y}}},{key:"createVTKMesh",value:function(e,t,o){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(t){var c=new this.THREE.PointsMaterial({color:o.color,size:o.pointSize,transparent:!0,opacity:o.opacity,sizeAttenuation:!0});n=new this.THREE.Points(e,c)}else if(o.useCylinderGeometry&&r&&r.length>0){var h="pressure"===o.colorMappingType&&l&&l.length>0||"flux"===o.colorMappingType&&d&&d.length>0,m=o.color;"default"===o.colorMappingType?m=o.color:h&&(m=16777215);var f=new this.THREE.MeshMatcapMaterial({color:m,transparent:!0,opacity:o.opacity,vertexColors:h});n=new this.THREE.Mesh(e,f)}else{var v=new this.THREE.LineBasicMaterial({color:o.color,linewidth:o.lineWidth,transparent:!0,opacity:o.opacity});if(n=new this.THREE.LineSegments(e,v),o.enableWireframe){var y=new this.THREE.LineBasicMaterial({color:16777215&o.color|8947848,linewidth:Math.max(1,o.lineWidth-2),transparent:!0,opacity:.3*o.opacity}),x=new this.THREE.LineSegments(e,y);x.position.copy(n.position),x.scale.copy(n.scale),x.scale.multiplyScalar(1.005),this.wireframeMesh=x}}return n}},{key:"addToScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!1!==t.clearPrevious&&(this.currentVTKMesh&&this.scene.remove(this.currentVTKMesh),this.wireframeMesh&&this.wireframeMesh!==e&&this.scene.remove(this.wireframeMesh)),this.setupSceneLighting(),this.scene.add(e),this.allVTKMeshes.push(e),this.currentVTKMesh=e,this.wireframeMesh&&this.scene.add(this.wireframeMesh)}},{key:"setupSceneLighting",value:function(){if(!this.lightingInitialized){var e=M,t=new this.THREE.AmbientLight(e.AMBIENT_COLOR,e.AMBIENT_INTENSITY);this.scene.add(t);var o=new this.THREE.DirectionalLight(e.MAIN_LIGHT_COLOR,e.MAIN_LIGHT_INTENSITY);o.position.set(10,10,5),o.castShadow=!0,this.scene.add(o);var n=new this.THREE.DirectionalLight(e.FILL_LIGHT_COLOR,e.FILL_LIGHT_INTENSITY);n.position.set(-5,3,-1),this.scene.add(n);var r=new this.THREE.DirectionalLight(e.RIM_LIGHT_COLOR,e.RIM_LIGHT_INTENSITY);r.position.set(0,-5,10),this.scene.add(r);var l=new this.THREE.PointLight(e.INTERNAL_LIGHT1_COLOR,e.INTERNAL_LIGHT1_INTENSITY,e.INTERNAL_LIGHT1_DISTANCE);l.position.set(0,0,0),this.scene.add(l);var d=new this.THREE.PointLight(e.INTERNAL_LIGHT2_COLOR,e.INTERNAL_LIGHT2_INTENSITY,e.INTERNAL_LIGHT2_DISTANCE);d.position.set(20,-10,15),this.scene.add(d),this.lightingInitialized=!0}}},{key:"setCopperScene",value:function(e){this.copperScene=e}},{key:"setPerformanceMode",value:function(e){this.performanceMode=e,console.log("[VTKLoader] Performance mode set to: ".concat(e))}},{key:"detectBranchingPoints",value:function(e,t){var o,n=new Map,r=m(e);try{for(r.s();!(o=r.n()).done;)for(var d=o.value,c=d[0],i=1;i<c;i++){var h=d[i],f=d[i+1];void 0!==f&&h<t&&f<t&&(n.has(h)||n.set(h,new Set),n.has(f)||n.set(f,new Set),n.get(h).add(f),n.get(f).add(h))}}catch(e){r.e(e)}finally{r.f()}var v,y=new Map,x=m(n);try{for(x.s();!(v=x.n()).done;){var w=Object(l.a)(v.value,2),C=w[0],T=w[1];T.size>2&&y.set(C,Array.from(T))}}catch(e){x.e(e)}finally{x.f()}return y}},{key:"createBranchingJunctions",value:function(e,t,o,n,r,c,h,f,v,y,x,w,T,M,_){var E,R=m(e);try{for(R.s();!(E=R.n()).done;){var S=Object(l.a)(E.value,2),D=S[0],L=S[1],k=new this.THREE.Vector3(t[3*D],t[3*D+1],t[3*D+2]),P=o[D]||C,N=void 0;if("pressure"===_.colorMappingType&&n.length>0){var z=n[D]||0;N=this.pressureToColor(z,c,h)}else if("flux"===_.colorMappingType&&r.length>0){var A=r[D]||0;N=this.fluxToColor(A,f,v)}else N=(_.colorMappingType,new this.THREE.Color(1,1,1));var O=this.createSeamlessJunction(k,P,N,L,t,o);y.push.apply(y,Object(d.a)(O.vertices)),x.push.apply(x,Object(d.a)(O.normals)),w.push.apply(w,Object(d.a)(O.colors));var I,V=m(O.indices);try{for(V.s();!(I=V.n()).done;){var B=I.value;T.push(B+M)}}catch(e){V.e(e)}finally{V.f()}M+=O.vertices.length/3}}catch(e){R.e(e)}finally{R.f()}}},{key:"createSeamlessJunction",value:function(e,t,o,n,r,l){var d=[],c=[],h=[],f=[],v=[],y=t;if(n&&r&&l){var x,w=m(n);try{for(w.s();!(x=w.n()).done;){var C=x.value;if(3*C+2<r.length){var T=new this.THREE.Vector3(r[3*C],r[3*C+1],r[3*C+2]),M=(new this.THREE.Vector3).subVectors(T,e).normalize(),_=l[C]||t;y=Math.max(y,_),v.push({direction:M,radius:_,distance:e.distanceTo(T)})}}}catch(e){w.e(e)}finally{w.f()}}if(v.length<3)return{vertices:[],normals:[],colors:[],indices:[]};for(var E=.95*y,i=0;i<=6;i++)for(var R=i/6*Math.PI,S=Math.sin(R),D=Math.cos(R),L=0;L<=6;L++){var k,P=L/6*Math.PI*2,N=Math.sin(P),z=Math.cos(P),A=new this.THREE.Vector3(S*z,D,S*N),O=E,I=0,V=E,B=m(v);try{for(B.s();!(k=B.n()).done;){var H=k.value,$=Math.max(0,A.dot(H.direction)),j=Math.pow($,3);O+=Math.max(E,1.2*H.radius)*j*.3,I+=j,j>.1&&(V=Math.max(V,1.25*H.radius))}}catch(e){B.e(e)}finally{B.f()}var G=1+.2*I;O=Math.max(O*G,V),O=Math.max(O,.9*E);var U=(new this.THREE.Vector3).copy(A).multiplyScalar(O).add(e);d.push(U.x,U.y,U.z);var F=this.calculateSmoothNormal(U,e,v);c.push(F.x,F.y,F.z),h.push(o.r,o.g,o.b)}for(var W=0;W<6;W++)for(var K=0;K<6;K++){var Y=7*W+K,J=Y+6+1;f.push(Y,J,Y+1),f.push(J,J+1,Y+1)}return{vertices:d,normals:c,colors:h,indices:f}}},{key:"calculateSmoothNormal",value:function(e,t,o){var n,r=(new this.THREE.Vector3).subVectors(e,t).normalize(),l=r.clone(),d=0,c=[],h=m(o);try{for(h.s();!(n=h.n()).done;){var f=n.value,v=Math.max(0,r.dot(f.direction)),y=Math.pow(v,2.5)*f.radius;c.push({direction:f.direction,weight:y}),d+=y}}catch(e){h.e(e)}finally{h.f()}if(d>0){var x,w=new this.THREE.Vector3,C=m(c);try{for(C.s();!(x=C.n()).done;){var T=x.value,M=T.weight/d;w.add(T.direction.clone().multiplyScalar(.12*M))}}catch(e){C.e(e)}finally{C.f()}l.add(w)}return l.normalize()}},{key:"clearTemporaryData",value:function(){}},{key:"loadWithLoD",value:(o=Object(r.a)(regeneratorRuntime.mark((function e(t,o){var n,r,l,d,c,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="".concat(t,"_").concat(o.colorMappingType),!this.lodCache.has(n)){e.next=7;break}return r=this.lodCache.get(n),l=this.createVTKMesh(r.geometry,r.isPointCloud,o,r.radiusData,r.pressureData,r.fluxData),this.addToScene(l,o),o.onComplete&&o.onComplete(l,r.isPointCloud,r.radiusData,r.pressureData,r.fluxData),e.abrupt("return",{success:!0,mesh:l,isPointCloud:r.isPointCloud,radiusData:r.radiusData,pressureData:r.pressureData,fluxData:r.fluxData});case 7:return o.onProgress&&o.onProgress("Loading ".concat(o.displayName),5),e.next=10,this.fetchVTKFile(t,o.onProgress);case 10:return d=e.sent,c=this.parseVTKData(d,o.onProgress,o.modelSize,!0,o),h=this.createVTKMesh(c.geometry,c.isPointCloud,o,c.radiusData,c.pressureData,c.fluxData),this.addToScene(h,o),this.lodCache.set(n,{geometry:c.geometry,isPointCloud:c.isPointCloud,radiusData:c.radiusData,pressureData:c.pressureData,fluxData:c.fluxData}),o.onComplete&&o.onComplete(h,c.isPointCloud,c.radiusData,c.pressureData,c.fluxData),e.abrupt("return",{success:!0,mesh:h,isPointCloud:c.isPointCloud,radiusData:c.radiusData,pressureData:c.pressureData,fluxData:c.fluxData});case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"loadStandard",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(t,o){var n,r,l,d,c,h,m,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchVTKFile(t,o.onProgress);case 2:return n=e.sent,r=this.parseVTKData(n,o.onProgress,o.modelSize,o.useCylinderGeometry,o),l=r.geometry,d=r.isPointCloud,c=r.radiusData,h=r.pressureData,m=r.fluxData,f=this.createVTKMesh(l,d,o,c,h,m),this.addToScene(f,o),o.onComplete&&o.onComplete(f,d,c,h,m),e.abrupt("return",{success:!0,mesh:f,isPointCloud:d,radiusData:c,pressureData:h,fluxData:m});case 9:case"end":return e.stop()}}),e,this)}))),function(e,o){return t.apply(this,arguments)})},{key:"clearCache",value:function(){this.lodCache.clear(),console.log("[VTKLoader] LoD cache cleared")}},{key:"dispose",value:function(){var e=this;this.allVTKMeshes.forEach((function(t){e.scene.remove(t)})),this.allVTKMeshes=[],this.currentVTKMesh&&(this.scene.remove(this.currentVTKMesh),this.currentVTKMesh=null),this.wireframeMesh&&(this.scene.remove(this.wireframeMesh),this.wireframeMesh=null),this.lodCache.clear(),this.copperScene=null}}]),e}();function E(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function R(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var S={props:{useTubeRendering:{type:Boolean,default:!0},currentPerformanceMode:{type:String,default:"high"},modelName:{type:String,default:"Loading..."}},data:function(){return{Copper:null,THREE:null,baseRenderer:null,container:null,vtkLoader:null,_resizeHandler:null,clientMounted:!1,currentModelType:"arterial",currentColorMappingType:"pressure",modelConfig:{arterial:{path:"/model/healthy_gen_np3ns1_flux_250_arterial_tree.vtk",displayName:"Placental Arterial Tree",color:16720418,opacity:1,modelSize:420,useCylinderGeometry:!0,cylinderSegments:10},venous:{path:"/model/healthy_gen_np3ns1_flux_250_venous_tree.vtk",displayName:"Placental Venous Tree",color:2237183,opacity:1,modelSize:420,useCylinderGeometry:!0,cylinderSegments:10},combined:{displayName:"Placental Vascular Network",models:["arterial","venous"]}}}},computed:{mdAndUp:function(){if(!this.clientMounted)return!1;try{return this.$vuetify&&this.$vuetify.breakpoint&&this.$vuetify.breakpoint.mdAndUp}catch(e){return console.warn("[Model] Error accessing vuetify breakpoint:",e),!1}}},mounted:function(){var e=this;this.clientMounted=!0,this.$nextTick((function(){e.waitForPluginsAndInitialize()}))},methods:{getAssetPath:function(e){var t="";t=window.location.pathname.startsWith("/pregnancy-app/")||window.location.hostname.includes("github.io")?"/pregnancy-app":"";var o=e.startsWith("/")?e:"/"+e;return console.log("[Model] Asset path: ".concat(e," -> ").concat(t+o)),t+o},waitForPluginsAndInitialize:function(){var e=arguments,t=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=e.length>0&&void 0!==e[0]?e[0]:0,10,200,t.checkPluginsAvailability()?(console.log("[Model] Plugins ready, initializing 3D engine..."),t.initializeCopper3D()):n<10?(console.log("[Model] Plugins not ready, retrying... (".concat(n+1,"/").concat(10,")")),t.$emit("model-state-updated",{modelName:"Loading 3D Engine... (".concat(n+1,"/").concat(10,")")}),setTimeout((function(){t.waitForPluginsAndInitialize(n+1)}),200)):(console.error("[Model] Failed to initialize plugins after maximum retries"),t.$emit("model-state-updated",{modelName:"Error: 3D engine initialization timed out"}));case 4:case"end":return o.stop()}}),o)})))()},checkPluginsAvailability:function(){try{return this.$Copper&&this.$three&&this.$baseRenderer&&this.$baseContainer&&"function"==typeof this.$Copper&&"function"==typeof this.$three&&"function"==typeof this.$baseRenderer&&"function"==typeof this.$baseContainer}catch(e){return!1}},initializeCopper3D:function(){this.waitForDOMAndInitialize()},waitForDOMAndInitialize:function(){var e=arguments,t=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=e.length>0&&void 0!==e[0]?e[0]:0,20,100,t.container=t.$refs.baseDomObject,t.container?(console.log("[Model] DOM container found, initializing 3D engine..."),t.initialize3DEngine()):n<20?(console.log("[Model] DOM container not ready, retrying... (".concat(n+1,"/").concat(20,")")),t.$emit("model-state-updated",{modelName:"Preparing 3D Container... (".concat(n+1,"/").concat(20,")")}),setTimeout((function(){t.waitForDOMAndInitialize(n+1)}),100)):(console.error("[Model] Failed to find DOM container after maximum retries"),t.$emit("model-state-updated",{modelName:"Error: DOM container not found"}));case 5:case"end":return o.stop()}}),o)})))()},initialize3DEngine:function(){var e=this;try{this.Copper=this.$Copper(),this.THREE=this.$three(),this.baseRenderer=this.$baseRenderer();var t=this.$baseContainer();if(!this.baseRenderer||!t||!this.container)return console.error("[Model] 3D components not properly initialized"),void this.$emit("model-state-updated",{modelName:"Error: 3D components missing"});setTimeout((function(){t&&e.container&&(e.mdAndUp?t.style.height="100vh":t.style.height="100vw",e.container.appendChild(t)),e.initializeVTKLoader(),e.start()}),100),this.setupResizeListener(t)}catch(e){console.error("[Model] Error initializing 3D components:",e),this.$emit("model-state-updated",{modelName:"Error: Failed to initialize 3D engine"})}},setupResizeListener:function(e){var t=this,o=function(){setTimeout((function(){e&&(t.mdAndUp?e.style.height="100vh":e.style.height="100vw"),t.scene&&t.scene.onWindowResize()}),500)};window.addEventListener("resize",o),this._resizeHandler=o},initializeVTKLoader:function(){try{if(!this.baseRenderer)return void console.error("[Model] Base renderer not available");this.scene=this.baseRenderer.getSceneByName("placental-scene"),void 0===this.scene&&(this.scene=this.baseRenderer.createScene("placental-scene"),this.baseRenderer.setCurrentScene(this.scene)),this.vtkLoader=new _(this.THREE,this.scene.scene),this.vtkLoader.setCopperScene(this.scene),this.vtkLoader.setPerformanceMode(this.currentPerformanceMode),console.log("VTK Loader initialized with camera control and performance mode:",this.currentPerformanceMode)}catch(e){console.error("[Model] Error initializing VTK loader:",e),this.$emit("model-state-updated",{modelName:"Error: VTK loader initialization failed"})}},start:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Loading default placental model..."),t.next=3,e.loadTree("arterial");case 3:case"end":return t.stop()}}),t)})))()},reciveColoringType:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(console.log("[Model] Coloring type received:",e),t.vtkLoader){o.next=4;break}return console.warn("[Model] VTK loader not initialized"),o.abrupt("return");case 4:return n="pressure","flux"===e||"flow"===e?n="flux":"default"===e||"vessel-type"===e?n="default":"pressure"===e&&(n="pressure"),console.log("[Model] Mapped to colorMappingType:",n),t.currentColorMappingType=n,o.prev=8,t.$emit("model-state-updated",{modelName:"Updating color mapping..."}),o.next=12,t.loadTree(t.currentModelType,{colorMappingType:n,clearScene:!0});case 12:console.log("[Model] Model reloaded with new color mapping:",n),o.next=19;break;case 15:o.prev=15,o.t0=o.catch(8),console.error("[Model] Error updating color mapping:",o.t0),t.$emit("model-state-updated",{modelName:"Error updating color mapping"});case 19:case"end":return o.stop()}}),o,null,[[8,15]])})))()},loadTree:function(e){var t=arguments,o=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,l,d,c,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{},console.log("[Model] Loading ".concat(e," model...")),l=o.modelConfig[e]){n.next=7;break}return console.error("[Model] Unknown model type: ".concat(e)),o.$emit("model-state-updated",{modelName:"Error: Unknown model type ".concat(e)}),n.abrupt("return");case 7:if("combined"!==e){n.next=12;break}return o.currentModelType=e,n.next=11,o.loadCombinedModels(l,r);case 11:return n.abrupt("return",n.sent);case 12:return o.currentModelType=e,d=R(R(R({},l),r),{},{cylinderSegments:r.highQuality?12:r.cylinderSegments||l.cylinderSegments,colorMappingType:r.colorMappingType||o.currentColorMappingType,useCylinderGeometry:!0}),c=o.getAssetPath(d.path),n.next=17,o.vtkLoader.loadVTKFile(c,{displayName:d.displayName,color:d.color,opacity:d.opacity,modelSize:d.modelSize,useCylinderGeometry:d.useCylinderGeometry,cylinderSegments:d.cylinderSegments,colorMappingType:d.colorMappingType||"pressure",clearPrevious:!1!==r.clearScene,useLoD:!1,onProgress:function(e){var t="".concat(e);o.$emit("model-state-updated",{modelName:t})},onComplete:function(){o.$emit("model-state-updated",{modelName:d.displayName});var e=o.getAssetPath("modelView/noInfarct_view.json");o.scene.loadViewUrl(e),o.scene.onWindowResize()}});case 17:return(h=n.sent).success||o.$emit("model-state-updated",{modelName:"Error: ".concat(h.error.message)}),n.abrupt("return",h);case 20:case"end":return n.stop()}}),n)})))()},loadCombinedModels:function(e){var t=arguments,o=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,l,i,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=t.length>1&&void 0!==t[1]?t[1]:{},l=r.models||e.models,n.prev=2,i=0;case 4:if(!(i<l.length)){n.next=11;break}return d=l[i],n.next=8,o.loadTree(d,R(R({},r),{},{clearScene:0===i,colorMappingType:r.colorMappingType}));case 8:i++,n.next=4;break;case 11:o.$emit("model-state-updated",{modelName:e.displayName}),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(2),console.error("[Model] Error loading combined models:",n.t0),o.$emit("model-state-updated",{modelName:"Loading Error"});case 18:case"end":return n.stop()}}),n,null,[[2,14]])})))()},reloadModel:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("User requested VTK model reload..."),t.next=3,e.loadTree("arterial",{color:16724787,displayName:"Placental Arterial Tree (Reloaded)"});case 3:case"end":return t.stop()}}),t)})))()},loadVenousTree:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Loading venous tree..."),t.next=3,e.loadTree("venous");case 3:case"end":return t.stop()}}),t)})))()},loadCombinedTrees:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Loading combined vascular network..."),t.next=3,e.loadTree("combined");case 3:case"end":return t.stop()}}),t)})))()},handleGestureIconClick:function(e){var rect=e.target.getBoundingClientRect();e.clientX-rect.left<=rect.width/4&&(console.log("[Model] Reset gesture clicked - resetting model to default position"),this.resetModelToDefault())},resetModelToDefault:function(){if(this.scene)try{var e=this.getAssetPath("modelView/noInfarct_view.json");this.scene.loadViewUrl(e),this.scene.onWindowResize(),this.vtkLoader&&this.vtkLoader.clearTemporaryData(),console.log("[Model] Model reset to default position completed"),this.$emit("model-state-updated",{modelName:this.modelName||"Placental Arterial Tree",resetTriggered:!0})}catch(e){console.error("[Model] Error resetting model to default:",e)}else console.warn("[Model] Scene not available for reset")}},beforeDestroy:function(){this.vtkLoader&&(this.vtkLoader.dispose(),this.vtkLoader=null),this._resizeHandler&&(window.removeEventListener("resize",this._resizeHandler),this._resizeHandler=null)}},D=S,L=(o(485),o(44)),component=Object(L.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"model"},[n("header",{staticClass:"model-info"},[e._v(e._s(e.modelName))]),e._v(" "),n("client-only",{scopedSlots:e._u([{key:"fallback",fn:function(){return[n("div",{staticClass:"loading-placeholder"},[n("div",{staticClass:"loading-text"},[e._v("Loading 3D Engine...")])])]},proxy:!0}])},[n("div",{ref:"baseDomObject",class:e.mdAndUp?"baseDom-md":"baseDom-sm",staticStyle:{width:"100%",height:"100%"}}),e._v(" "),n("div",{ref:"threeDControls",staticClass:"baseModelControl",class:e.mdAndUp?"baseModelControl-md":"baseModelControl-sm"},[n("div",{staticClass:"baseModelCB",class:e.mdAndUp?"baseModelCB-md":""},[n("img",{directives:[{name:"show",rawName:"v-show",value:e.mdAndUp,expression:"mdAndUp"}],staticClass:"h-full w-full md:object-contain",attrs:{src:o(484)},on:{click:e.handleGestureIconClick}})])])])],1)}),[],!1,null,"999fcde8",null);t.default=component.exports},530:function(e,t,o){"use strict";o(483)},531:function(e,t,o){var n=o(25)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Bad+Script&family=Raleway:wght@100;300&display=swap);"]),n.push([e.i,".responsive-container[data-v-3a083a8a]{width:100vw;height:100vh;display:flex;flex-direction:row}@media(max-width:768px){.responsive-container[data-v-3a083a8a]{flex-direction:column}}.model-section[data-v-3a083a8a]{flex:1;position:relative;min-height:60vh}.model-section.model-section-mobile[data-v-3a083a8a]{min-height:40vh;height:40vh}.controls-section[data-v-3a083a8a]{display:flex;flex-direction:column;position:fixed;top:0;right:0;height:100vh;width:350px;max-width:30vw;padding:15px;overflow-y:auto;background:hsla(0,0%,100%,.02);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-left:1px solid rgba(31,102,131,.2)}.controls-section.controls-section-mobile[data-v-3a083a8a]{position:relative;width:100%;max-width:100%;height:auto;max-height:60vh;overflow-y:auto;flex-direction:row;flex-wrap:wrap;padding:10px;border-left:none;border-top:1px solid rgba(31,102,131,.2)}.controls-panel[data-v-3a083a8a]{margin-bottom:15px}.controls-section-mobile .controls-panel[data-v-3a083a8a]{flex:1;min-width:300px;margin-right:15px;margin-bottom:10px}.conditions-panel[data-v-3a083a8a]{margin-bottom:15px}.controls-section-mobile .conditions-panel[data-v-3a083a8a]{flex:1;min-width:300px;margin-right:15px;margin-bottom:10px}.waveform-panel[data-v-3a083a8a]{flex:1;min-height:160px;background:rgba(49,54,87,.1);border-radius:12px;padding:15px;margin-bottom:15px;border:1px solid rgba(31,102,131,.3);transition:all .3s ease}.waveform-panel.waveform-pushed[data-v-3a083a8a]{margin-top:20px;background:rgba(49,54,87,.15);border-color:rgba(31,102,131,.5)}.controls-section-mobile .waveform-panel[data-v-3a083a8a]{width:100%;min-width:100%;margin-right:0;order:3}.waveform-header[data-v-3a083a8a]{margin-bottom:10px}.waveform-header h4[data-v-3a083a8a]{color:#6c90b9;font-size:14px;font-weight:600;margin:0;text-transform:uppercase;letter-spacing:.5px}.waveform-content[data-v-3a083a8a]{height:120px;width:100%}.logo-section[data-v-3a083a8a]{margin-top:auto;padding:20px 0;text-align:center}.logo-container[data-v-3a083a8a]{max-width:150px;margin:0 auto;opacity:.8}.logo-container[data-v-3a083a8a]:hover{opacity:1;transition:opacity .3s ease}.model-panel[data-v-3a083a8a]{position:relative}",""]),e.exports=n},542:function(e,t,o){var content=o(585);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(26).default)("e97b7850",content,!0,{sourceMap:!1})},547:function(e,t,o){"use strict";o.r(t);o(92),o(65),o(6),o(59);var n=o(471),r=o(472),l=o(473),d={data:function(){return{clientMounted:!1,modelStates:{useTubeRendering:!0,currentPerformanceMode:"high",modelName:"Loading...",pressureColorMapping:null,pressureMapping:!0,isLoading:!1,loadingComplete:!1,colorMappingType:"pressure"},waveformData:{data:[],title:"Placental Blood Flow Waveform",isPlaying:!0,speed:1},ultrasoundToolRef:null,lastUltrasoundMetrics:null,lastConditionData:null,isConditionsPanelExpanded:!1}},mounted:function(){this.clientMounted=!0,$nuxt.$emit("send-emitter-data","data in RightPanel.vue send to Model.vue"),this.waveformData.data=this.generateWaveformData(200),console.log("[RightPane] Generated waveform data:",this.waveformData.data.length,"points"),this.$nuxt.$on("ultrasound-metrics-updated",this.handleUltrasoundMetricsUpdated),this.$nuxt.$on("trigger-model-visualization",this.handleTriggerModelVisualization),this.$nuxt.$on("ultrasound-tool-ready",this.handleUltrasoundToolReady),this.$nuxt.$on("conditions-updated",this.handleConditionsUpdated),this.$nuxt.$on("trigger-condition-visualization",this.handleTriggerConditionVisualization)},computed:{mdAndUp:function(){if(!this.clientMounted)return!1;try{return this.$vuetify&&this.$vuetify.breakpoint&&this.$vuetify.breakpoint.mdAndUp}catch(e){return console.warn("[RightPane] Error accessing vuetify breakpoint:",e),!1}}},methods:{handleReloadArterial:function(){this.$refs.modelComponent&&this.$refs.modelComponent.loadTree&&this.$refs.modelComponent.loadTree("arterial",{color:16720418,displayName:"Placental Arterial Tree",colorMappingType:this.modelStates.colorMappingType,pressureMapping:this.modelStates.pressureMapping})},handleLoadVenous:function(){console.log("[RightPane] Loading venous tree model..."),this.$refs.modelComponent&&this.$refs.modelComponent.loadTree&&this.$refs.modelComponent.loadTree("venous",{color:2237183,displayName:"Placental Venous Tree",colorMappingType:this.modelStates.colorMappingType,pressureMapping:this.modelStates.pressureMapping})},handleColoredModelsByChanged:function(e){console.log("[RightPane] Color mapping changed to:",e),this.modelStates.coloredModelsBy=e,this.modelStates.colorMappingType=e,this.$refs.modelComponent.reciveColoringType(e)},handleLoadCombinedTrees:function(){this.$refs.modelComponent&&this.$refs.modelComponent.loadTree&&this.$refs.modelComponent.loadTree("combined",{colorMappingType:this.modelStates.colorMappingType})},handleModelStateUpdate:function(e){Object.assign(this.modelStates,e),e.hasOwnProperty("pressureMapping")&&(this.modelStates.pressureMapping=e.pressureMapping,console.log("[RightPane] Pressure mapping updated to:",e.pressureMapping)),e.hasOwnProperty("isLoading")&&(this.modelStates.isLoading=e.isLoading),e.hasOwnProperty("loadingComplete")&&e.loadingComplete&&(this.modelStates.loadingComplete=e.loadingComplete)},handleUltrasoundMetricsUpdated:function(data){console.log("[RightPane] Received ultrasound metrics:",data),this.lastUltrasoundMetrics=data,this.$refs.modelComponent&&"Loading..."!==this.modelStates.modelName&&console.log("[RightPane] Model component ready for ultrasound visualization")},handleTriggerModelVisualization:function(e){console.log("[RightPane] Model visualization triggered:",e),"ultrasound-metrics"===e.type?this.visualizeUltrasoundMetrics(e.data):"pregnancy-conditions"===e.type&&this.visualizeConditions(e.data)},handleUltrasoundToolReady:function(e){console.log("[RightPane] Ultrasound tool ready for model integration"),this.ultrasoundToolRef=e,this.$refs.modelComponent&&"Loading..."!==this.modelStates.modelName&&this.notifyUltrasoundToolOfModelState()},visualizeUltrasoundMetrics:function(e){console.log("[RightPane] Visualizing ultrasound metrics in model:",e);e.metrics;var t=e.interpretation;this.modelStates.modelName="Ultrasound Analysis","high"===t.riskLevel?console.log("[RightPane] Future: Load high-resistance placental model"):"moderate"===t.riskLevel?console.log("[RightPane] Future: Load moderate-resistance placental model"):console.log("[RightPane] Future: Load normal placental model")},notifyUltrasoundToolOfModelState:function(){if(this.ultrasoundToolRef&&this.ultrasoundToolRef.updateModelVisualization){var e={modelComponent:this.$refs.modelComponent,modelStates:this.modelStates,ready:!0};this.ultrasoundToolRef.updateModelVisualization(e)}},handleConditionsUpdated:function(data){console.log("[RightPane] Received condition updates:",data),this.lastConditionData=data},handleTriggerConditionVisualization:function(e){console.log("[RightPane] Condition visualization specifically triggered:",e),"pregnancy-conditions"===e.type&&this.visualizeConditions(e.data)},visualizeConditions:function(e){console.log("[RightPane] Visualizing pregnancy conditions in model:",e);var t=e.selectedConditions,o=e.conditionDetails;e.combinedEffect;if(0!==t.length){var n=o.map((function(e){return e.abbreviation})).join(", ");this.modelStates.modelName="".concat(n," Analysis");var r=t.some((function(e){return["sga","fgr","iugr"].includes(e)})),l=t.some((function(e){return["pe","sga_pe"].includes(e)})),d=t.some((function(e){return"gdm"===e}));r&&console.log("[RightPane] Future: Load smaller placental model with compromised vasculature"),l&&console.log("[RightPane] Future: Highlight increased resistance areas in model"),d&&console.log("[RightPane] Future: Load larger placental model")}else this.modelStates.modelName="Placental Model"},handleConditionsChanged:function(data){if(console.log("[RightPane] Conditions changed:",data),this.lastConditionData=data,data.selectedConditions.length>0)data.conditionDetails.map((function(e){return e.abbreviation})).join(", ")},handleConditionVisualization:function(data){console.log("[RightPane] Condition visualization from selector:",data),this.visualizeConditions(data)},handleResetToNormal:function(){console.log("[RightPane] Reset to normal placenta"),this.modelStates.modelName="Placental Model",this.lastConditionData=null},handleConditionsPanelExpanded:function(){this.isConditionsPanelExpanded=!0},handleConditionsPanelCollapsed:function(){this.isConditionsPanelExpanded=!1},generateWaveformData:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,data=[],t=3e3,o=1500,i=0;i<e;i++){var n=Math.sin(i/e*Math.PI*20)*o*.8,r=Math.sin(i/e*Math.PI*4)*o*.3,l=Math.sin(i/e*Math.PI*60)*o*.1,d=(Math.random()-.5)*o*.05,c=t+n+r+l+d;data.push(Math.round(Math.max(500,c)))}return data}},beforeDestroy:function(){this.$nuxt.$off("ultrasound-metrics-updated",this.handleUltrasoundMetricsUpdated),this.$nuxt.$off("trigger-model-visualization",this.handleTriggerModelVisualization),this.$nuxt.$off("ultrasound-tool-ready",this.handleUltrasoundToolReady),this.$nuxt.$off("conditions-updated",this.handleConditionsUpdated),this.$nuxt.$off("trigger-condition-visualization",this.handleTriggerConditionVisualization)},components:{PanelControls:n.default,Waveform:r.default,ConditionSelector:l.default}},c=d,h=(o(530),o(44)),component=Object(h.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"responsive-container"},[o("div",{staticClass:"model-section",class:{"model-section-mobile":!e.mdAndUp}},[o("model",{ref:"modelComponent",attrs:{"use-tube-rendering":e.modelStates.useTubeRendering,"current-performance-mode":e.modelStates.currentPerformanceMode,"model-name":e.modelStates.modelName},on:{"model-state-updated":e.handleModelStateUpdate}})],1),e._v(" "),o("div",{staticClass:"controls-section",class:{"controls-section-mobile":!e.mdAndUp}},[o("div",{staticClass:"controls-panel"},[o("PanelControls",{attrs:{"use-tube-rendering":e.modelStates.useTubeRendering,"current-performance-mode":e.modelStates.currentPerformanceMode,"model-name":e.modelStates.modelName,"pressure-color-mapping":e.modelStates.pressureColorMapping,"pressure-mapping":e.modelStates.pressureMapping,"is-loading":e.modelStates.isLoading,"loading-complete":e.modelStates.loadingComplete},on:{"reload-arterial":e.handleReloadArterial,"load-venous":e.handleLoadVenous,"load-combined":e.handleLoadCombinedTrees,"colored-models-by-changed":e.handleColoredModelsByChanged}})],1),e._v(" "),o("div",{staticClass:"conditions-panel"},[o("ConditionSelector",{on:{"conditions-changed":e.handleConditionsChanged,"trigger-visualization":e.handleConditionVisualization,"reset-to-normal":e.handleResetToNormal,"panel-expanded":e.handleConditionsPanelExpanded,"panel-collapsed":e.handleConditionsPanelCollapsed}})],1),e._v(" "),o("div",{staticClass:"waveform-panel",class:{"waveform-pushed":e.isConditionsPanelExpanded}},[e._m(0),e._v(" "),o("div",{staticClass:"waveform-content"},[o("Waveform",{attrs:{waveform:e.waveformData}})],1)]),e._v(" "),e.mdAndUp?o("div",{staticClass:"logo-section"},[o("div",{staticClass:"logo-container"},[o("logo")],1)]):e._e()])])}),[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"waveform-header"},[o("h4",[e._v("Blood Flow Analysis")])])}],!1,null,"3a083a8a",null);t.default=component.exports;installComponents(component,{Model:o(508).default,PanelControls:o(471).default,ConditionSelector:o(473).default,Waveform:o(472).default,Logo:o(306).default})},584:function(e,t,o){"use strict";o(542)},585:function(e,t,o){var n=o(25)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Bad+Script&family=Raleway:wght@100;300&display=swap);"]),n.push([e.i,".right-pane[data-v-057849d4]{width:100%;color:#aa988a}",""]),e.exports=n},622:function(e,t,o){"use strict";o.r(t);var n=o(30),r=(o(108),{layout:"default",asyncData:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n,r,l,d,content;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=e.route,n=e.$getContentBySlug,r=e.error,l=e.store,d=o.params.slug,null===(content=n(d))&&r({statusCode:404,message:"Unexpected Error, Page not found"}),l.commit("setCurrentContent",content);case 5:case"end":return t.stop()}}),t)})))()}}),l=(o(584),o(44)),component=Object(l.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"outerDiv"},[t("div",{staticClass:"text-center"},[t("right-pane")],1)])}),[],!1,null,"057849d4",null);t.default=component.exports;installComponents(component,{RightPane:o(547).default})}}]);