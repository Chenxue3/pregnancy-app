(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{463:function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var r=o(182);var n=o(206),l=o(142);function c(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(n.a)(e)||Object(l.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},482:function(e,t,o){var content=o(500);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(26).default)("58612784",content,!0,{sourceMap:!1})},486:function(e,t,o){"use strict";o.r(t);var r=o(463),n=o(30),l=(o(107),o(85),o(59),o(65),o(36),o(66),o(6),o(299),o(10),o(19),o(12),o(20),o(56),o(34),o(67),o(50),o(69),o(74),o(51),o(265));function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t,o){return d=c()?Reflect.construct:function(e,t,o){var a=[null];a.push.apply(a,t);var r=new(Function.bind.apply(e,a));return o&&Object(l.a)(r,o.prototype),r},d.apply(null,arguments)}var h=o(1),m=o(28),f=o(29);o(21),o(70),o(91),o(68),o(17),o(13);function v(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,l=!0,c=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return l=e.done,e},e:function(e){c=!0,n=e},f:function(){try{l||null==o.return||o.return()}finally{if(c)throw n}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function T(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?T(Object(source),!0).forEach((function(t){Object(h.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):T(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var M=function(){function e(t,o){Object(m.a)(this,e),this.THREE=t,this.scene=o,this.currentVTKMesh=null,this.wireframeMesh=null,this.lightingInitialized=!1}var t,o;return Object(f.a)(e,[{key:"loadVTKFile",value:(o=Object(n.a)(regeneratorRuntime.mark((function e(t){var o,r,n,l,c,d,h,m,f,v,y=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=y.length>1&&void 0!==y[1]?y[1]:{},r=o.modelSize||420,n=w({displayName:"VTK Model",color:16720418,opacity:.9,modelSize:r,lineWidth:o.lineWidth||Math.max(2,Math.round(r/70)),pointSize:o.pointSize||Math.max(8,Math.round(r/17)),enableWireframe:!0,useCylinderGeometry:!1,cylinderSegments:8,onProgress:null,onComplete:null},o),console.log("[VTKLoader] Loading VTK file: ".concat(t),n),n.onProgress&&n.onProgress("Loading ".concat(n.displayName,"..."),0),e.prev=5,e.next=8,this.fetchVTKFile(t,n.onProgress);case 8:return l=e.sent,c=this.parseVTKData(l,n.onProgress,n.modelSize,n.useCylinderGeometry),d=c.geometry,h=c.isPointCloud,m=c.radiusData,f=c.pressureData,v=this.createVTKMesh(d,h,n,m,f),this.addToScene(v,n),n.onComplete&&n.onComplete(v,h,m,f),console.log("[VTKLoader] Successfully loaded: ".concat(n.displayName)),e.abrupt("return",{success:!0,mesh:v,isPointCloud:h,radiusData:m,pressureData:f});case 18:return e.prev=18,e.t0=e.catch(5),console.error("[VTKLoader] Failed to load VTK file ".concat(t,":"),e.t0),e.abrupt("return",{success:!1,error:e.t0});case 22:case"end":return e.stop()}}),e,this,[[5,18]])}))),function(e){return o.apply(this,arguments)})},{key:"fetchVTKFile",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var o,r,n,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=l.length>1&&void 0!==l[1]?l[1]:null,console.log("[VTKLoader] Fetching VTK file..."),o&&o("Downloading file...",10),e.next=5,fetch(t);case 5:if((r=e.sent).ok){e.next=8;break}throw new Error("HTTP ".concat(r.status,": ").concat(r.statusText));case 8:return e.next=10,r.text();case 10:return n=e.sent,console.log("[VTKLoader] VTK file loaded, size:",n.length,"characters"),o&&o("File downloaded, parsing data...",30),e.abrupt("return",n);case 14:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"parseVTKData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];console.log("[VTKLoader] Starting VTK data parsing..."),t&&t("Parsing VTK data structure...",40);for(var l=e.split("\n"),c=[],d=!1,h=!1,m=!1,f=!1,v=[],y=[],T=[],w=0,M=0,E=[],i=0;i<l.length;i++){var line=l[i].trim();if(t&&i%1e3==0){var progress=40+i/l.length*30;t("Parsing VTK data...",progress)}if(line.startsWith("POINTS")){var V=line.split(" ");w=parseInt(V[1]),console.log("[VTKLoader] Found",w,"3D points in VTK file"),d=!0,h=!1,!1,m=!1,f=!1}else if(line.startsWith("CELLS")||line.startsWith("POLYGONS")||line.startsWith("LINES")){var L=line.split(" ");L.length>1&&(M=parseInt(L[1]),console.log("[VTKLoader] Found",M,"cells/connections in VTK file")),d=!1,h=!0,!1,m=!1,f=!1}else if(line.startsWith("POINT_DATA"))console.log("[VTKLoader] Found POINT_DATA section"),d=!1,h=!1,!0,m=!1,f=!1;else if(line.startsWith("SCALARS")){var x=line.split(" ");if(x.length>1){var R=x[1].toLowerCase();"radius"===R?(console.log("[VTKLoader] Found Radius scalar data"),m=!0,f=!1):"pressure"===R?(console.log("[VTKLoader] Found Pressure scalar data"),m=!1,f=!0):(m=!1,f=!1)}d=!1,h=!1}else if(!line.startsWith("LOOKUP_TABLE")){if(d&&v.length<3*w){var P=line.split(" ").filter((function(e){return""!==e})).map(parseFloat);v.push.apply(v,Object(r.a)(P))}if(m&&y.length<w){var C=line.split(" ").filter((function(e){return""!==e})).map(parseFloat);y.push.apply(y,Object(r.a)(C))}if(f&&T.length<w){var O=line.split(" ").filter((function(e){return""!==e})).map(parseFloat);T.push.apply(T,Object(r.a)(O))}if(h&&""!==line.trim()&&!line.startsWith("CELL_TYPES")&&!line.startsWith("POINT_DATA")&&!line.startsWith("SCALARS")&&!line.startsWith("LOOKUP_TABLE")){var K=line.split(" ").filter((function(e){return""!==e})),A=K.map((function(e){return parseInt(e)})).filter((function(e){return!isNaN(e)}));if(A.length>1){var z=A[0];if(A.length===z+1&&(E.push(A),!n))for(var j=1;j<z;j++){var S=A[j],k=A[j+1];void 0===k||isNaN(S)||isNaN(k)||3*S+2<v.length&&3*k+2<v.length&&c.push(v[3*S],v[3*S+1],v[3*S+2],v[3*k],v[3*k+1],v[3*k+2])}}}(line.startsWith("CELL_TYPES")||line.startsWith("POINT_DATA"))&&(h=!1)}}console.log("[VTKLoader] Parsing complete:",v.length/3,"points processed"),console.log("[VTKLoader] Found",y.length,"radius values"),console.log("[VTKLoader] Found",T.length,"pressure values"),console.log("[VTKLoader] Created",c.length/6,"line segments for rendering"),t&&t("Creating 3D geometry...",70);var F=new this.THREE.BufferGeometry;if(n&&y.length>0&&E.length>0){console.log("[VTKLoader] Creating cylinder geometry with radius and pressure data...");var H=this.createCylinderGeometry(v,y,T,E,o);return{geometry:H,isPointCloud:!1,radiusData:y,pressureData:T}}if(0===c.length&&(console.warn("[VTKLoader] No line segments created! Using point cloud fallback."),console.log("[VTKLoader] Points array length:",v.length),console.log("[VTKLoader] Expected points:",3*w)),0===c.length&&v.length>0)return console.log("[VTKLoader] Creating point cloud fallback visualization..."),F.setAttribute("position",new this.THREE.Float32BufferAttribute(v,3)),y.length>0&&F.setAttribute("radius",new this.THREE.Float32BufferAttribute(y,1)),T.length>0&&F.setAttribute("pressure",new this.THREE.Float32BufferAttribute(T,1)),{geometry:F,isPointCloud:!0,radiusData:y,pressureData:T};F.setAttribute("position",new this.THREE.Float32BufferAttribute(c,3)),F.computeBoundingBox();var D=F.boundingBox.getCenter(new this.THREE.Vector3),_=F.boundingBox.getSize(new this.THREE.Vector3),N=Math.max(_.x,_.y,_.z),$=o/N;return console.log("[VTKLoader] Model bounding box size:",_),console.log("[VTKLoader] Largest dimension:",N),console.log("[VTKLoader] Target model size:",o,"units"),console.log("[VTKLoader] Applied scale factor:",$),F.translate(-D.x,-D.y,-D.z),F.scale($,$,$),t&&t("Geometry created, building materials...",80),{geometry:F,isPointCloud:!1,radiusData:y,pressureData:T}}},{key:"createCylinderGeometry",value:function(e,t,o,n,l){console.log("[VTKLoader] Creating cylinder geometry...");var c=new this.THREE.BufferGeometry,d=[],h=[],m=[],f=[],y=0,T=1/0,w=-1/0;o.length>0&&(T=Math.min.apply(Math,Object(r.a)(o)),w=Math.max.apply(Math,Object(r.a)(o)),console.log("[VTKLoader] Pressure range:",T.toFixed(4),"to",w.toFixed(4)));var M,E=v(n);try{for(E.s();!(M=E.n()).done;)for(var V=M.value,L=V[0],i=1;i<L;i++){var x=V[i],R=V[i+1];if(void 0!==R&&x<e.length/3&&R<e.length/3){var P=new this.THREE.Vector3(e[3*x],e[3*x+1],e[3*x+2]),C=new this.THREE.Vector3(e[3*R],e[3*R+1],e[3*R+2]),O=t[x]||.1,K=t[R]||.1,A=o[x]||0,z=o[R]||0,j=this.pressureToColor(A,T,w),S=this.pressureToColor(z,T,w),k=this.createTaperedCylinder(P,C,O,K,8,j,S),F=k.vertices,H=k.normals,D=k.colors,_=k.indices;d.push.apply(d,Object(r.a)(F)),h.push.apply(h,Object(r.a)(H)),m.push.apply(m,Object(r.a)(D));var N,$=v(_);try{for($.s();!(N=$.n()).done;){var B=N.value;f.push(B+y)}}catch(e){$.e(e)}finally{$.f()}y+=F.length/3}}}catch(e){E.e(e)}finally{E.f()}c.setAttribute("position",new this.THREE.Float32BufferAttribute(d,3)),c.setAttribute("normal",new this.THREE.Float32BufferAttribute(h,3)),c.setAttribute("color",new this.THREE.Float32BufferAttribute(m,3)),c.setIndex(f),c.computeBoundingBox();var I=c.boundingBox.getCenter(new this.THREE.Vector3),W=c.boundingBox.getSize(new this.THREE.Vector3),U=l/Math.max(W.x,W.y,W.z);return c.translate(-I.x,-I.y,-I.z),c.scale(U,U,U),console.log("[VTKLoader] Created cylinder geometry with",d.length/3,"vertices and pressure color mapping"),c}},{key:"pressureToColor",value:function(e,t,o){var r=o>t?(e-t)/(o-t):.5,n=Math.pow(r,.4),l=new this.THREE.Color;if(n<.5){var c=2*n;l.setRGB(.23+.75*c,.7+.23*c,.27-.27*c)}else{var d=2*(n-.5);l.setRGB(.98-.42*d,.93-.81*d,0)}return l}},{key:"getPressureColorMapping",value:function(e,t){for(var o=[],i=0;i<15;i++){var r=i/14,n=e+(t-e)*r,l=this.pressureToColor(n,e,t);o.push({pressure:n,normalizedValue:r,color:"rgb(".concat(Math.round(255*l.r),", ").concat(Math.round(255*l.g),", ").concat(Math.round(255*l.b),")")})}return{minPressure:e,maxPressure:t,samples:o,description:"Pressure Color Scale",colorStops:[{color:"#3BB245",label:"Low",position:0},{color:"#FA8722",label:"Medium",position:.5},{color:"#8E202A",label:"High",position:1}]}}},{key:"createTaperedCylinder",value:function(e,t,o,r,n,l,c){var d=[],h=[],m=[],f=[],v=(new this.THREE.Vector3).subVectors(t,e).normalize(),y=(e.distanceTo(t),new this.THREE.Vector3(0,1,0)),T=(new this.THREE.Vector3).crossVectors(v,y).normalize();T.lengthSq()<.1&&T.crossVectors(v,new this.THREE.Vector3(1,0,0)).normalize();for(var w=(new this.THREE.Vector3).crossVectors(T,v).normalize(),M=0;M<=1;M++)for(var E=M,V=(new this.THREE.Vector3).lerpVectors(e,t,E),L=o+(r-o)*E,x=(new this.THREE.Color).lerpColors(l,c,E),R=0;R<n;R++){var P=R/n*Math.PI*2,C=Math.cos(P)*L,O=Math.sin(P)*L,K=(new this.THREE.Vector3).copy(V).add(T.clone().multiplyScalar(C)).add(w.clone().multiplyScalar(O));d.push(K.x,K.y,K.z);var A=(new this.THREE.Vector3).copy(T.clone().multiplyScalar(C)).add(w.clone().multiplyScalar(O)).normalize();h.push(A.x,A.y,A.z),m.push(x.r,x.g,x.b)}for(var z=0;z<1;z++)for(var j=0;j<n;j++){var S=z*n+j,k=z*n+(j+1)%n,F=(z+1)*n+j,H=(z+1)*n+(j+1)%n;f.push(S,k,F),f.push(F,k,H)}return{vertices:d,normals:h,colors:m,indices:f}}},{key:"createVTKMesh",value:function(e,t,o){var r,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(t){console.log("[VTKLoader] Creating point cloud visualization");var c=new this.THREE.PointsMaterial({color:o.color,size:o.pointSize,transparent:!0,opacity:o.opacity,sizeAttenuation:!0});r=new this.THREE.Points(e,c)}else if(o.useCylinderGeometry&&n&&n.length>0){console.log("[VTKLoader] Creating cylinder mesh visualization with radius and pressure data");var d=new this.THREE.MeshPhongMaterial({color:l&&l.length>0?16777215:o.color,transparent:!0,opacity:o.opacity,shininess:30,vertexColors:l&&l.length>0});r=new this.THREE.Mesh(e,d)}else{console.log("[VTKLoader] Creating line segment visualization");var h=new this.THREE.LineBasicMaterial({color:o.color,linewidth:o.lineWidth,transparent:!0,opacity:o.opacity});if(r=new this.THREE.LineSegments(e,h),o.enableWireframe){var m=new this.THREE.LineBasicMaterial({color:16777215&o.color|8947848,linewidth:Math.max(1,o.lineWidth-2),transparent:!0,opacity:.3*o.opacity}),f=new this.THREE.LineSegments(e,m);f.position.copy(r.position),f.scale.copy(r.scale),f.scale.multiplyScalar(1.005),this.wireframeMesh=f}}return r}},{key:"addToScene",value:function(e,t){this.currentVTKMesh&&this.scene.remove(this.currentVTKMesh),this.wireframeMesh&&this.wireframeMesh!==e&&this.scene.remove(this.wireframeMesh),this.setupSceneLighting(),this.currentVTKMesh=e,this.scene.add(e),this.wireframeMesh&&(this.scene.add(this.wireframeMesh),console.log("[VTKLoader] Added wireframe overlay for enhanced detail")),console.log("[VTKLoader] VTK model successfully added to scene:",e),e.geometry&&e.geometry.attributes&&e.geometry.attributes.position&&console.log("[VTKLoader] Total vertices in geometry:",e.geometry.attributes.position.count)}},{key:"setupSceneLighting",value:function(){if(!this.lightingInitialized){var e=new this.THREE.AmbientLight(6702148,.6);this.scene.add(e);var t=new this.THREE.DirectionalLight(16777215,.8);t.position.set(10,10,5),t.castShadow=!0,this.scene.add(t);var o=new this.THREE.DirectionalLight(16772829,.4);o.position.set(-5,3,-1),this.scene.add(o);var r=new this.THREE.DirectionalLight(11206655,.3);r.position.set(0,-5,10),this.scene.add(r);var n=new this.THREE.PointLight(16737894,.5,100);n.position.set(0,0,0),this.scene.add(n);var l=new this.THREE.PointLight(6711039,.3,80);l.position.set(20,-10,15),this.scene.add(l),this.lightingInitialized=!0,console.log("[VTKLoader] Enhanced lighting system initialized")}}},{key:"setCameraPosition",value:function(e){var t=w({position:[115,80,115],target:[0,0,0],up:[0,1,0]},e);console.log("[VTKLoader] Setting camera position:",t);var o=d(this.THREE.Vector3,Object(r.a)(t.position)),n=d(this.THREE.Vector3,Object(r.a)(t.target)),l=d(this.THREE.Vector3,Object(r.a)(t.up));if(o.distanceTo(n)<.1&&(console.warn("[VTKLoader] Camera position too close to target, adjusting..."),t.position=[60,40,60]),this.copperScene&&this.copperScene.camera){var c=this.copperScene.camera;try{var h;(h=c.position).set.apply(h,Object(r.a)(t.position)),c.lookAt(d(this.THREE.Vector3,Object(r.a)(t.target))),c.up.copy(l),c.updateProjectionMatrix(),c.updateMatrixWorld(),console.log("[VTKLoader] Camera position updated successfully")}catch(e){console.error("[VTKLoader] Error setting camera position:",e),c.position.set(60,40,60),c.lookAt(new this.THREE.Vector3(0,0,0)),c.up.set(0,1,0)}}else console.warn("[VTKLoader] Camera not accessible through current scene setup")}},{key:"setPredefinedView",value:function(e){var t={front:{position:[0,0,180],target:[0,0,0],up:[0,1,0]},top:{position:[0,180,0],target:[0,0,0],up:[0,0,-1]},side:{position:[180,0,0],target:[0,0,0],up:[0,1,0]},isometric:{position:[140,105,140],target:[0,0,0],up:[0,1,0]},closeup:{position:[80,60,80],target:[0,0,0],up:[0,1,0]},wide:{position:[250,180,250],target:[0,0,0],up:[0,1,0]}};t[e]?(this.setCameraPosition(t[e]),console.log("[VTKLoader] Set camera to ".concat(e," view"))):(console.warn("[VTKLoader] Unknown view: ".concat(e)),console.log("[VTKLoader] Available views:",Object.keys(t)))}},{key:"setCopperScene",value:function(e){this.copperScene=e,console.log("[VTKLoader] Copper scene reference set for camera control")}},{key:"getOptimalCameraPosition",value:function(){if(!this.currentVTKMesh||!this.currentVTKMesh.geometry)return{position:[140,105,140],target:[0,0,0],up:[0,1,0]};this.currentVTKMesh.geometry.computeBoundingBox();var e=this.currentVTKMesh.geometry.boundingBox,t=e.getSize(new this.THREE.Vector3),o=e.getCenter(new this.THREE.Vector3),r=.9*Math.max(t.x,t.y,t.z);return{position:[o.x+.7*r,o.y+.5*r,o.z+.7*r],target:[o.x,o.y,o.z],up:[0,1,0]}}},{key:"dispose",value:function(){this.currentVTKMesh&&(this.scene.remove(this.currentVTKMesh),this.currentVTKMesh=null),this.wireframeMesh&&(this.scene.remove(this.wireframeMesh),this.wireframeMesh=null),this.copperScene=null,console.log("[VTKLoader] Resources cleaned up")}}]),e}(),E={props:{useTubeRendering:{type:Boolean,default:!0},currentPerformanceMode:{type:String,default:"high"},modelName:{type:String,default:"Loading..."}},data:function(){return{Copper:null,THREE:null,baseRenderer:null,container:null,helloworld:"",model:null,vtkLoader:null,_resizeHandler:null,clientMounted:!1}},computed:{mdAndUp:function(){if(!this.clientMounted)return!1;try{return this.$vuetify&&this.$vuetify.breakpoint&&this.$vuetify.breakpoint.mdAndUp}catch(e){return console.warn("[Model] Error accessing vuetify breakpoint:",e),!1}}},mounted:function(){var e=this;this.clientMounted=!0,this.$nextTick((function(){e.waitForPluginsAndInitialize()}))},methods:{getAssetPath:function(e){var t="";t=window.location.pathname.startsWith("/pregnancy-app/")||window.location.hostname.includes("github.io")?"/pregnancy-app":"";var o=e.startsWith("/")?e:"/"+e;return console.log("[Model] Asset path: ".concat(e," -> ").concat(t+o)),t+o},waitForPluginsAndInitialize:function(){var e=arguments,t=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:r=e.length>0&&void 0!==e[0]?e[0]:0,10,200,t.checkPluginsAvailability()?(console.log("[Model] Plugins ready, initializing 3D engine..."),t.initializeCopper3D()):r<10?(console.log("[Model] Plugins not ready, retrying... (".concat(r+1,"/").concat(10,")")),t.$emit("model-state-updated",{modelName:"Loading 3D Engine... (".concat(r+1,"/").concat(10,")")}),setTimeout((function(){t.waitForPluginsAndInitialize(r+1)}),200)):(console.error("[Model] Failed to initialize plugins after maximum retries"),t.$emit("model-state-updated",{modelName:"Error: 3D engine initialization timed out"}));case 4:case"end":return o.stop()}}),o)})))()},checkPluginsAvailability:function(){try{return this.$Copper&&this.$three&&this.$baseRenderer&&this.$baseContainer&&"function"==typeof this.$Copper&&"function"==typeof this.$three&&"function"==typeof this.$baseRenderer&&"function"==typeof this.$baseContainer}catch(e){return!1}},initializeCopper3D:function(){this.waitForDOMAndInitialize()},waitForDOMAndInitialize:function(){var e=arguments,t=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:r=e.length>0&&void 0!==e[0]?e[0]:0,20,100,t.container=t.$refs.baseDomObject,t.container?(console.log("[Model] DOM container found, initializing 3D engine..."),t.initialize3DEngine()):r<20?(console.log("[Model] DOM container not ready, retrying... (".concat(r+1,"/").concat(20,")")),t.$emit("model-state-updated",{modelName:"Preparing 3D Container... (".concat(r+1,"/").concat(20,")")}),setTimeout((function(){t.waitForDOMAndInitialize(r+1)}),100)):(console.error("[Model] Failed to find DOM container after maximum retries"),t.$emit("model-state-updated",{modelName:"Error: DOM container not found"}));case 5:case"end":return o.stop()}}),o)})))()},initialize3DEngine:function(){var e=this;try{this.Copper=this.$Copper(),this.THREE=this.$three(),this.baseRenderer=this.$baseRenderer();var t=this.$baseContainer();if(!this.baseRenderer||!t||!this.container)return console.error("[Model] 3D components not properly initialized"),void this.$emit("model-state-updated",{modelName:"Error: 3D components missing"});setTimeout((function(){t&&e.container&&(e.mdAndUp?t.style.height="100vh":t.style.height="100vw",e.container.appendChild(t)),e.initializeVTKLoader(),e.start()}),100),this.setupResizeListener(t)}catch(e){console.error("[Model] Error initializing 3D components:",e),this.$emit("model-state-updated",{modelName:"Error: Failed to initialize 3D engine"})}},setupResizeListener:function(e){var t=this,o=function(){setTimeout((function(){e&&(t.mdAndUp?e.style.height="100vh":e.style.height="100vw"),t.scene&&t.scene.onWindowResize()}),500)};window.addEventListener("resize",o),this._resizeHandler=o},initializeVTKLoader:function(){try{if(!this.baseRenderer)return void console.error("[Model] Base renderer not available");this.scene=this.baseRenderer.getSceneByName("placental-scene"),void 0===this.scene&&(this.scene=this.baseRenderer.createScene("placental-scene"),this.baseRenderer.setCurrentScene(this.scene)),this.vtkLoader=new M(this.THREE,this.scene.scene),this.vtkLoader.setCopperScene(this.scene),this.vtkLoader.setPerformanceMode(this.currentPerformanceMode),console.log("VTK Loader initialized with camera control and performance mode:",this.currentPerformanceMode)}catch(e){console.error("[Model] Error initializing VTK loader:",e),this.$emit("model-state-updated",{modelName:"Error: VTK loader initialization failed"})}},start:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Loading default placental model..."),o=e.getAssetPath("/model/healthy_gen_np3ns1_flux_250_arterial_tree.vtk"),t.next=4,e.vtkLoader.loadVTKFile(o,{displayName:"Placental Arterial Tree",color:16720418,opacity:.9,modelSize:420,useCylinderGeometry:!0,cylinderSegments:10,onProgress:function(t,progress){var o="".concat(t," (").concat(Math.round(progress),"%)");e.$emit("model-state-updated",{modelName:o})},onComplete:function(t,o,n,l){var c="Placental Arterial Tree (3D)",d=null;if(n&&n.length>0){var h=Math.min.apply(Math,Object(r.a)(n)),m=Math.max.apply(Math,Object(r.a)(n)),f=n.reduce((function(a,b){return a+b}),0)/n.length;console.log("[Model] Loaded radius data for ".concat(n.length," points")),console.log("[Model] Radius range: ".concat(h.toFixed(4)," - ").concat(m.toFixed(4))),console.log("[Model] Average radius: ".concat(f.toFixed(4))),c+=" (".concat(n.length," vessels)")}if(l&&l.length>0){var v=Math.min.apply(Math,Object(r.a)(l)),y=Math.max.apply(Math,Object(r.a)(l)),T=l.reduce((function(a,b){return a+b}),0)/l.length;console.log("[Model] Loaded pressure data for ".concat(l.length," points")),console.log("[Model] Pressure range: ".concat(v.toFixed(4)," - ").concat(y.toFixed(4))),console.log("[Model] Average pressure: ".concat(T.toFixed(4))),d=e.vtkLoader.getPressureColorMapping(v,y),c+=" with pressure mapping"}e.$emit("model-state-updated",{modelName:c,pressureColorMapping:d});var w=e.getAssetPath("modelView/noInfarct_view.json");e.scene.loadViewUrl(w),e.scene.onWindowResize()}});case 4:(n=t.sent).success||e.$emit("model-state-updated",{modelName:"Error: ".concat(n.error.message)});case 6:case"end":return t.stop()}}),t)})))()},reloadModel:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("User requested VTK model reload..."),o=e.getAssetPath("/model/healthy_gen_np3ns1_flux_250_arterial_tree.vtk"),t.next=4,e.vtkLoader.loadVTKFile(o,{displayName:"Placental Arterial Tree",color:16724787,opacity:.9,modelSize:420,useCylinderGeometry:!0,cylinderSegments:10,onProgress:function(t,progress){var o="".concat(t," (").concat(Math.round(progress),"%)");e.$emit("model-state-updated",{modelName:o})},onComplete:function(t,o,n,l){var c="Placental Arterial Tree (3D)",d=null;if(n&&n.length>0&&(console.log("[Model] Loaded radius data for ".concat(n.length," points")),c+=" (".concat(n.length," vessels)")),l&&l.length>0){console.log("[Model] Loaded pressure data for ".concat(l.length," points"));var h=Math.min.apply(Math,Object(r.a)(l)),m=Math.max.apply(Math,Object(r.a)(l));d=e.vtkLoader.getPressureColorMapping(h,m),c+=" with pressure mapping"}e.$emit("model-state-updated",{modelName:c,pressureColorMapping:d});var f=e.getAssetPath("modelView/noInfarct_view.json");e.scene.loadViewUrl(f)}});case 4:(n=t.sent).success||e.$emit("model-state-updated",{modelName:"Error: ".concat(n.error.message)});case 6:case"end":return t.stop()}}),t)})))()},loadArterialTreeWithCylinders:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Loading arterial tree with cylinder geometry..."),o=e.getAssetPath("/model/healthy_gen_np3ns1_flux_250_arterial_tree.vtk"),t.next=4,e.vtkLoader.loadVTKFile(o,{displayName:"Placental Arterial Tree (Cylinders)",color:16720418,opacity:.9,modelSize:420,useCylinderGeometry:!0,cylinderSegments:12,onProgress:function(t,progress){var o="".concat(t," (").concat(Math.round(progress),"%)");e.$emit("model-state-updated",{modelName:o})},onComplete:function(t,o,n,l){var c="Placental Arterial Tree (High Quality)",d=null;if(n&&n.length>0){var h=Math.min.apply(Math,Object(r.a)(n)),m=Math.max.apply(Math,Object(r.a)(n)),f=n.reduce((function(a,b){return a+b}),0)/n.length;console.log("[Model] High quality cylinder rendering with ".concat(n.length," radius values:")),console.log("[Model] Radius range: ".concat(h.toFixed(4)," - ").concat(m.toFixed(4))),console.log("[Model] Average radius: ".concat(f.toFixed(4))),c+=" (".concat(n.length," vessels)")}if(l&&l.length>0){var v=Math.min.apply(Math,Object(r.a)(l)),y=Math.max.apply(Math,Object(r.a)(l));console.log("[Model] Pressure mapping: ".concat(v.toFixed(4)," - ").concat(y.toFixed(4))),d=e.vtkLoader.getPressureColorMapping(v,y),c+=" with pressure colors"}e.$emit("model-state-updated",{modelName:c,pressureColorMapping:d});var T=e.getAssetPath("modelView/noInfarct_view.json");e.scene.loadViewUrl(T)}});case 4:(n=t.sent).success||e.$emit("model-state-updated",{modelName:"Error: ".concat(n.error.message)});case 6:case"end":return t.stop()}}),t)})))()},loadVenousTree:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.getAssetPath("/model/healthy_gen_np3ns1_flux_250_venous_tree.vtk"),t.next=3,e.vtkLoader.loadVTKFile(o,{displayName:"Placental Venous Tree",color:2237183,opacity:.8,modelSize:420,useCylinderGeometry:!0,cylinderSegments:10,onProgress:function(t,progress){var o="".concat(t," (").concat(Math.round(progress),"%)");e.$emit("model-state-updated",{modelName:o})},onComplete:function(t,o,n,l){var c="Placental Venous Tree (3D)",d=null;if(n&&n.length>0){var h=Math.min.apply(Math,Object(r.a)(n)),m=Math.max.apply(Math,Object(r.a)(n)),f=n.reduce((function(a,b){return a+b}),0)/n.length;console.log("[Model] Venous tree loaded with ".concat(n.length," radius values")),console.log("[Model] Radius range: ".concat(h.toFixed(4)," - ").concat(m.toFixed(4))),console.log("[Model] Average radius: ".concat(f.toFixed(4))),c+=" (".concat(n.length," vessels)")}if(l&&l.length>0){var v=Math.min.apply(Math,Object(r.a)(l)),y=Math.max.apply(Math,Object(r.a)(l));console.log("[Model] Venous pressure range: ".concat(v.toFixed(4)," - ").concat(y.toFixed(4))),d=e.vtkLoader.getPressureColorMapping(v,y),c+=" with pressure mapping"}e.$emit("model-state-updated",{modelName:c,pressureColorMapping:d});var T=e.getAssetPath("modelView/noInfarct_view.json");e.scene.loadViewUrl(T)}});case 3:(n=t.sent).success||e.$emit("model-state-updated",{modelName:"Error: ".concat(n.error.message)});case 5:case"end":return t.stop()}}),t)})))()},loadVenousTreeWithCylinders:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Loading venous tree with cylinder geometry..."),o=e.getAssetPath("/model/healthy_gen_np3ns1_flux_250_venous_tree.vtk"),t.next=4,e.vtkLoader.loadVTKFile(o,{displayName:"Placental Venous Tree (Cylinders)",color:2237183,opacity:.8,modelSize:420,useCylinderGeometry:!0,cylinderSegments:12,onProgress:function(t,progress){var o="".concat(t," (").concat(Math.round(progress),"%)");e.$emit("model-state-updated",{modelName:o})},onComplete:function(t,o,n,l){var c="Placental Venous Tree (High Quality)",d=null;if(n&&n.length>0){var h=Math.min.apply(Math,Object(r.a)(n)),m=Math.max.apply(Math,Object(r.a)(n)),f=n.reduce((function(a,b){return a+b}),0)/n.length;console.log("[Model] Venous high quality rendering with ".concat(n.length," radius values:")),console.log("[Model] Radius range: ".concat(h.toFixed(4)," - ").concat(m.toFixed(4))),console.log("[Model] Average radius: ".concat(f.toFixed(4))),c+=" (".concat(n.length," vessels)")}if(l&&l.length>0){var v=Math.min.apply(Math,Object(r.a)(l)),y=Math.max.apply(Math,Object(r.a)(l));console.log("[Model] Venous pressure mapping: ".concat(v.toFixed(4)," - ").concat(y.toFixed(4))),d=e.vtkLoader.getPressureColorMapping(v,y),c+=" with pressure colors"}e.$emit("model-state-updated",{modelName:c,pressureColorMapping:d});var T=e.getAssetPath("modelView/noInfarct_view.json");e.scene.loadViewUrl(T)}});case 4:(n=t.sent).success||e.$emit("model-state-updated",{modelName:"Error: ".concat(n.error.message)});case 6:case"end":return t.stop()}}),t)})))()},loadModel:function(e,t){var o=this.getAssetPath("modelView/noInfarct_view.json");this.scene=this.baseRenderer.getSceneByName(t),void 0===this.scene&&(this.scene=this.baseRenderer.createScene(t),this.baseRenderer.setCurrentScene(this.scene),this.scene.loadOBJ(e,(function(content){console.log(content)})),this.scene.loadViewUrl(o)),this.scene.onWindowResize()},toggleRenderMode:function(){console.log("[Model] Toggle render mode called - reloading model"),this.$emit("model-state-updated",{modelName:"Reloading model..."}),this.start()},cyclePerformanceMode:function(){var e=["high","medium","low","auto"],t=e.indexOf(this.currentPerformanceMode),o=e[(t+1)%e.length];console.log("[Model] Performance mode set to:",o),this.$emit("model-state-updated",{currentPerformanceMode:o})}},watch:{},beforeDestroy:function(){this.vtkLoader&&(this.vtkLoader.dispose(),this.vtkLoader=null),this._resizeHandler&&(window.removeEventListener("resize",this._resizeHandler),this._resizeHandler=null)}},V=E,L=(o(499),o(37)),component=Object(L.a)(V,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"model"},[o("client-only",{scopedSlots:e._u([{key:"fallback",fn:function(){return[o("div",{staticClass:"loading-placeholder"},[o("div",{staticClass:"loading-text"},[e._v("Loading 3D Engine...")])])]},proxy:!0}])},[o("div",{ref:"baseDomObject",class:e.mdAndUp?"baseDom-md":"baseDom-sm",staticStyle:{width:"100%",height:"100%"}})])],1)}),[],!1,null,"5ba4cd4e",null);t.default=component.exports},499:function(e,t,o){"use strict";o(482)},500:function(e,t,o){var r=o(25)(!1);r.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Bad+Script&family=Raleway:wght@100;300&display=swap);"]),r.push([e.i,".model[data-v-5ba4cd4e]{position:relative;width:100%;height:100%}.baseDom-md[data-v-5ba4cd4e]{width:100%;height:100vh}.baseDom-sm[data-v-5ba4cd4e]{width:100%;height:100vw}.loading-placeholder[data-v-5ba4cd4e]{display:flex;align-items:center;justify-content:center;width:100%;height:100vh;background:linear-gradient(135deg,#1a1a1a,#2d2d2d)}.loading-placeholder .loading-text[data-v-5ba4cd4e]{color:#fff;font-size:18px;font-weight:300;text-align:center;opacity:.8}@media(max-width:768px){.loading-placeholder[data-v-5ba4cd4e]{height:100vw}}",""]),e.exports=r}}]);